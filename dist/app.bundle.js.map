{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/assets/css/styles.css?e890","webpack:///./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack:///./src/assets/css/styles.css","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/tslib/tslib.es6.js","webpack:///./node_modules/gl-matrix/esm/common.js","webpack:///./node_modules/gl-matrix/esm/mat4.js","webpack:///./node_modules/gl-matrix/esm/vec3.js","webpack:///./node_modules/gl-matrix/esm/vec4.js","webpack:///./src/app/math_utils.ts","webpack:///./src/app/controls.ts","webpack:///./src/app/renderables/renderable.ts","webpack:///./src/app/renderables/car_body_renderable.ts","webpack:///./src/app/renderables/wheel_renderable.ts","webpack:///./src/app/lights/lights.ts","webpack:///./src/app/game_objects/game_object.ts","webpack:///./src/app/renderables/cube_renderable.ts","webpack:///./src/app/game_objects/powerup.ts","webpack:///./src/app/renderables/half_sphere_renderable.ts","webpack:///./src/app/game_objects/projectile.ts","webpack:///./src/app/game_objects/gun.ts","webpack:///./src/app/collision.ts","webpack:///./src/app/game_objects/car.ts","webpack:///./src/app/renderables/square_renderable.ts","webpack:///./src/app/game_objects/floor.ts","webpack:///./src/app/renderables/floor_renderable.ts","webpack:///./src/app/gl_utils.ts","webpack:///./src/app/shaders/base_shader_program.ts","webpack:///./src/app/shaders/standard_shader_program.ts","webpack:///./src/app/shaders/light_shader_program.ts","webpack:///./src/app/shaders/shaders.ts","webpack:///./src/app/camera.ts","webpack:///./src/app/game_objects/street_light.ts","webpack:///./src/app/scene.ts","webpack:///./src/app/ai.ts","webpack:///./src/main.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","api","content","default","options","locals","memo","isOldIE","Boolean","window","document","all","atob","getTarget","target","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","e","stylesInDom","getIndexByIdentifier","identifier","result","length","modulesToDom","list","idCountMap","identifiers","item","id","base","count","concat","index","obj","css","media","sourceMap","references","updater","push","addStyle","insertStyleElement","style","createElement","attributes","nonce","keys","forEach","setAttribute","insert","Error","appendChild","textStore","replaceText","replacement","filter","join","applyToSingletonTag","remove","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","applyToTag","removeAttribute","btoa","unescape","encodeURIComponent","JSON","stringify","firstChild","singleton","singletonCounter","update","styleIndex","parentNode","removeStyleElement","newObj","lastIdentifiers","newList","toString","newLastIdentifiers","_i","_index","splice","___CSS_LOADER_API_IMPORT___","useSourceMap","this","map","cssMapping","sourceMapping","base64","data","sourceURLs","sources","source","sourceRoot","cssWithMappingToString","mediaQuery","dedupe","alreadyImportedModules","extendStatics","b","setPrototypeOf","__proto__","Array","__extends","__","constructor","__values","iterator","next","done","TypeError","EPSILON","ARRAY_TYPE","Float32Array","RANDOM","Math","random","PI","out","clone","a","copy","fromValues","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","set","identity","transpose","a01","a02","a03","a12","a13","a23","invert","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","adjoint","determinant","multiply","b0","b1","b2","b3","translate","v","x","y","z","rotate","rad","axis","b12","b20","b21","b22","len","hypot","sin","cos","rotateX","rotateY","rotateZ","fromTranslation","fromScaling","fromRotation","fromXRotation","fromYRotation","fromZRotation","fromRotationTranslation","q","w","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","fromQuat2","translation","bx","by","bz","bw","ax","ay","az","aw","magnitude","getTranslation","mat","getScaling","getRotation","scaling","is1","is2","is3","sm11","sm12","sm13","sm21","sm22","sm23","sm31","sm32","sm33","trace","S","sqrt","fromRotationTranslationScale","sx","sy","sz","fromRotationTranslationScaleOrigin","ox","oy","oz","out0","out1","out2","out4","out5","out6","out8","out9","out10","fromQuat","yx","zx","zy","frustum","left","right","bottom","top","near","far","rl","tb","nf","perspective","fovy","aspect","f","tan","Infinity","perspectiveFromFieldOfView","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","ortho","lr","bt","lookAt","eye","center","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","abs","targetTo","str","frob","add","subtract","multiplyScalar","multiplyScalarAndAdd","scale","exactEquals","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","max","arguments","mul","sub","divide","ceil","floor","min","round","scaleAndAdd","distance","squaredDistance","squaredLength","negate","inverse","dot","cross","lerp","hermite","factorTimes2","factor1","factor2","factor3","factor4","bezier","inverseFactor","inverseFactorTimesTwo","zScale","transformMat4","transformMat3","transformQuat","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","angle","mag","cosine","acos","zero","vec","div","dist","sqrDist","sqrLen","stride","offset","fn","arg","u","A","B","C","D","E","F","G","H","I","J","v1","v2","v3","v4","s1","s2","ix","iy","iz","iw","makeVec","vector","makeVec4","addVec","arr","getTrianglesFromSquares","squares","triangles","square","triA","triB","sign","num","Key","getNormal","Triangle","trans","flip","Square","getCenter","bToA","bToC","positions","normals","getPositions","getNormals","addTriangles","triangle","triNormal","normalize","initBuffers","gl","positionBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","normalBuffer","buffers","position","normal","render","program","modelMatrix","normalMatrix","numComponents","type","FLOAT","vertexAttribPointer","attribLocations","vertexPosition","enableVertexAttribArray","vertexNormal","useProgram","uniformMatrix4fv","uniformLocations","vertexCount","UNSIGNED_SHORT","drawArrays","TRIANGLES","CAR_BODY_RENDERABLE","LENGTH","bodyWidth","xOffset","groundOffset","height","yMin","yMax","zOffset","tlf","blf","trf","brf","tlb","blb","trb","brb","frontFace","backFace","topFace","bottomFace","leftFace","rightFace","WHEEL_RENDERABLE","deltaTheta","circleTriangles","circleCenter","theta","cosA","ptA","cosB","ptB","tri","leftTriangle","wheelWidth","rightTriangle","cylinderSquare","LightType","CONTROLS","keyMap","Map","assignedControlMap","onkeydown","keyCode","onkeyup","isKeyDown","addAssignedControl","action","has","removeAssignedControl","delete","getAssignedControlMap","getStringForKey","W","L","N","ONE","TWO","THREE","FOUR","SPACE","elapsedTime","getLights","renderLight","renderTranslucents","PowerUpType","CUBE_RENDERABLE","HALF_SPHERE_RENDERABLE","deltaPhi","TWO_PI","PI_OVER_TWO","yheda","cosY","cosY2","initialPosition","initialDirection","material","ambient","diffuse","specular","shininess","damage","fireSpeed","direction","initialVelocity","timeElapsedMs","elapsedMs","positionUpdate","v0t","halfAtSquared","setMaterialUniform","model","scaleAmount","orientation","timeBetweenShotsMs","timeSinceLastShot","isReadyToShoot","shoot","origin","forwardDirection","inverseDirection","bounds","COLLISION","rayIntersectsBox","ray","box","t0","t1","tMin","tMax","tyMin","tyMax","tzMin","tzMax","pointInBox","point","powerUpType","SHIELD","light","lightType","POINT","lightColor","constant","linear","quadratic","yRotation","setColor","scaleL","X_AXIS","Y_AXIS","Z_AXIS","isRenderAabb","isUsingControls","gun","projectiles","health","hasShield","shieldHealth","MAX_SHIELD_HEALTH","bodyColor","wheelColor","DEFAULT_BODY_MATERIAL","bodyMaterial","wheelMaterial","headlightLocalPosition","headlightDownRotation","headlight","SPOT","lowerLimit","upperLimit","xRotationAngle","yRotationAngle","zRotationAngle","velocity","acceleration","accelerationPerGas","restDecelerationRate","brakeDecelerationRate","maxAccelerationMagnitude","maxVelocityMagnitude","wheelTurn","wheelReturnToCenterRate","wheelTurnRate","maxWheelTurn","wheelZOffset","shieldRadius","frontLeftWheelPosition","backLeftWheelPosition","backRightWheelPosition","frontRightWheelPosition","bindControls","getUpVector","backWheelToFront","leftWheelToRight","getForwardVector","backToFront","localForward","worldForward","getRotationMatrix","getBackwardVector","frontToBack","localBackward","worldBackward","getInput","isTurningLeft","isTurningRight","isGasPedalDown","isBrakePedalDown","isShooting","ai","elapsedSeconds","deltaPosition","velocityNormalized","velocityMag","gunPosition","areWheelsStraight","newWheelTurn","accelerationMag","distanceBetweenWheelsVec","angularVelocity","rotationAngleUpdate","rotatedVelocity","accelerationNormalized","rotatedAcceleration","oppositeVelocityNormalized","isCoasting","forward","acclerationUpdate","newAcceleration","prevVelocity","newVelocity","prevNewDot","getYAtXZ","getCarBodyModelWithJustYRotation","frontLeftWheelPosWorld","backLeftWheelPosWorld","frontLeftY","backLeftY","frontLeftWheelWorldWithY","backLeftWheelWorldWithY","backToFrontFlat","xRot","backRightWheelPosWorld","backRightY","backRightWheelPosWorldWithY","leftToRight","leftToRightFlat","finalModel","getCarBodyModel","getProjectiles","projs","proj","onHit","projectile","onPowerUp","powerUp","activateShield","getAxisAlignedBox","leftFrontBottom","leftBackBottom","rightBackBottom","rightFrontBottom","leftFrontTop","leftBackTop","rightBackTop","rightFrontTop","carBodyModelMatrix","rotationMatrix","renderWheel","renderGun","renderShield","boxMaterial","getHasShield","shieldPercentage","shieldMaterial","isFront","wheelPos","wheelTransMat","wheelModelMatrix","wheelRotMat","SQUARE_RENDERABLE","topLeft","bottomLeft","bottomRight","topRight","floorColor","useGrid","gridTiles","width","gridColors","start","squaresPerRow","j","yFront","yBack","deltaY","leftX","rightX","frontZ","backZ","rotAngleAboutXAxis","squareCenter","squareSize","tile","tileZLength","zRatio","aToB","console","log","FLOOR_RENDERABLE","USE_GRID","loadShader","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","alert","getShaderInfoLog","deleteShader","vsSource","fsSource","shaderProgram","vertexShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","initShaderProgram","getAttribLocation","projectionMatrix","getUniformLocation","viewMatrix","pointLightLocations","spotLightLocations","standardShaderUniformLocations","directionalLightDirection","directionalLightColorAmbient","directionalLightColorDiffuse","directionalLightColorSpecular","numPointLights","numSpotLights","cameraPosition","materialAmbient","materialDiffuse","materialSpecular","materialShininess","fogNear","fogFar","fogColor","pointLightLocs","lightColorAmbient","lightColorDiffuse","lightColorSpecular","spotLightLocs","uniform4fv","uniform1f","setDirectionalLight","directionalLight","uniform3fv","setPointLights","pointLights","uniform1i","pointLight","setSpotLights","spotLights","spotLight","colorUniformLocation","SHADERS","init","standard","ORBIT_ANGLE","MOVEMENT","K","O","P","getViewMatrix","view","orbitLeft","orbitRight","moveUp","moveDown","zoomIn","zoomOut","color","baseScale","basePosition","crossBarScale","crossBarPosition","getModel","baseModel","crossBarModel","canvas","sceneParams","isChaseCam","gameObjects","cars","streetLights","powerUps","maxPowerUps","createProjectionMatrix","camera","M","MAX_POINT_LIGHTS","streetLight","powerUpSpawns","pos","getRandomPowerUp","setPlayerCar","car","playerCar","addCar","gameObject","carBoxes","indexOf","hit","updateChaseCam","resize","viewport","clearColor","enable","BLEND","blendFunc","ONE_MINUS_SRC_ALPHA","clearDepth","CULL_FACE","DEPTH_TEST","depthFunc","LEQUAL","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","setSceneParamsUniforms","lights","getAllLights","carOffsetBack","carOffsetUp","carOffset","widthHeight","getWidthHeight","fieldOfView","fog","realToCSSPixels","devicePixelRatio","displayWidth","displayHeight","clientWidth","clientHeight","scene","delay","title","lastTime","body","backgroundColor","display","classList","styles","controls","innerHTML","getContext","alpha","premultipliedAlpha","initRenderables","initScene","gameLoop","now","requestAnimationFrame","DIRECTIONAL","carMats","MAX_SPOT_LIGHTS","randRot","Ai","isInitialized","onreadystatechange","readyState"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/@teamsupercell/typings-for-css-modules-loader/src/index.js!../../../node_modules/css-loader/dist/cjs.js??ref--5-2!./styles.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._3Mwv5So4MvxeCu4kT6nAa7 {\\n    background-color: #000000;\\n    display: block;\\n    margin: 0;\\n    padding: 0;\\n}\", \"\"]);\n// Exports\nexports.locals = {\n\t\"body\": \"_3Mwv5So4MvxeCu4kT6nAa7\"\n};\nmodule.exports = exports;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {ReadonlyMat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to translate\r\n * @param {ReadonlyVec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyVec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {ReadonlyVec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {ReadonlyQuat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {ReadonlyVec3} v Translation vector\r\n * @param {ReadonlyVec3} s Scaling vector\r\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {ReadonlyQuat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {ReadonlyVec3} eye Position of the viewer\r\n * @param {ReadonlyVec3} center Point the viewer is looking at\r\n * @param {ReadonlyVec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {ReadonlyMat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {ReadonlyMat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {ReadonlyMat4} a the first operand\r\n * @param {ReadonlyMat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyMat4} a The first matrix.\r\n * @param {ReadonlyMat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {ReadonlyVec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the first operand\r\n * @param {ReadonlyVec3} b the second operand\r\n * @param {ReadonlyVec3} c the third operand\r\n * @param {ReadonlyVec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {ReadonlyVec3} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {ReadonlyVec3} a The vec3 point to rotate\r\n * @param {ReadonlyVec3} b The origin of the rotation\r\n * @param {Number} rad The angle of rotation in radians\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {ReadonlyVec3} a The first operand\r\n * @param {ReadonlyVec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec3} a The first vector.\r\n * @param {ReadonlyVec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\n\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {ReadonlyVec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the source vector\r\n * @returns {vec4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to floor\r\n * @returns {vec4} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {vec4} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to round\r\n * @returns {vec4} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {ReadonlyVec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to negate\r\n * @returns {vec4} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to invert\r\n * @returns {vec4} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\r\n * Returns the cross-product of three vectors in a 4-dimensional space\r\n *\r\n * @param {ReadonlyVec4} result the receiving vector\r\n * @param {ReadonlyVec4} U the first vector\r\n * @param {ReadonlyVec4} V the second vector\r\n * @param {ReadonlyVec4} W the third vector\r\n * @returns {vec4} result\r\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the first operand\r\n * @param {ReadonlyVec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyMat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {ReadonlyVec4} a the vector to transform\r\n * @param {ReadonlyQuat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\r\n * Set the components of a vec4 to zero\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @returns {vec4} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {ReadonlyVec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {ReadonlyVec4} a The first vector.\r\n * @param {ReadonlyVec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import { vec3, vec4, mat4 } from 'gl-matrix';\n\nexport const EPSILON: number = .001;\n\nexport function makeVec(x: number, y: number, z: number): vec3 {\n    const vector = vec3.create();\n    vec3.set(vector, x, y, z);\n    return vector;\n}\n\nexport function makeVec4(x: number, y: number, z: number, w: number): vec4 {\n    const vector = vec4.create();\n    vec4.set(vector, x, y, z, w);\n    return vector;\n}\n\nexport function addVec(arr: number[], vec: vec3) {\n    arr.push(vec[0]);\n    arr.push(vec[1]);\n    arr.push(vec[2]);\n}\n\nexport function hasSignChange(a: number, b: number) {\n    return a >= 0 && b < 0 || a < 0 && b >= 0;\n}\n\nexport function getTrianglesFromSquares(squares: Square[]): Triangle[] {\n    const triangles: Triangle[] = [];\n    for (let square of squares) {\n        const triA = new Triangle(square.a, square.b, square.d);\n        const triB = new Triangle(square.b, square.c, square.d);\n        triangles.push(triA);\n        triangles.push(triB);\n    }\n    return triangles;\n}\n\nexport function sign(num: number) {\n    return num > 0.0 ? 1.0 : -1.0;\n}\n\nexport class Triangle {\n    constructor(\n        public a: vec3,\n        public b: vec3,\n        public c: vec3) { }\n\n    getNormal(): vec3 {\n        const u = vec3.create();\n        const v = vec3.create();\n        vec3.sub(u, this.b, this.a);\n        vec3.sub(v, this.c, this.a);\n        return makeVec(\n            u[1] * v[2] - u[2] * v[1],\n            u[2] * v[0] - u[0] * v[2],\n            u[0] * v[1] - u[1] * v[0]);\n    }\n\n    clone() {\n        return new Triangle(vec3.clone(this.a), vec3.clone(this.b), vec3.clone(this.c));\n    }\n\n    translate(trans: vec3): Triangle {\n        vec3.add(this.a, this.a, trans);\n        vec3.add(this.b, this.b, trans);\n        vec3.add(this.c, this.c, trans);\n        return this;\n    }\n\n    flip(): Triangle {\n        const copy = this.clone();\n        this.a = copy.c;\n        this.b = copy.b;\n        this.c = copy.a;\n        return this;\n    }\n}\n\nexport class Square {\n    readonly a: vec3;\n    readonly b: vec3;\n    readonly c: vec3;\n    readonly d: vec3;\n\n    constructor({ a, b, c, d }: { a: vec3; b: vec3; c: vec3; d: vec3 }) {\n        this.a = a;\n        this.b = b;\n        this.c = c;\n        this.d = d;\n    }\n\n    clone(): Square {\n        return new Square({\n            a: vec3.clone(this.a),\n            b: vec3.clone(this.b),\n            c: vec3.clone(this.c),\n            d: vec3.clone(this.d),\n        });\n    }\n\n    translate(vec: vec3): Square {\n        vec3.add(this.a, this.a, vec);\n        vec3.add(this.b, this.b, vec);\n        vec3.add(this.c, this.c, vec);\n        vec3.add(this.d, this.d, vec);\n        return this;\n    }\n\n    getCenter(): vec3 {\n        const bToA = vec3.sub(vec3.create(), this.a, this.b);\n        const bToC = vec3.sub(vec3.create(), this.c, this.b);\n        vec3.scale(bToA, bToA, .5); vec3.scale(bToC, bToC, .5);\n        const center = vec3.add(vec3.create(), bToA, bToC);\n        return center;\n    }\n}\n","\nexport enum Key {\n    SPACE = 32,\n\n    ONE = 49,\n    TWO = 50,\n    THREE = 51,\n    FOUR = 52,\n\n    A = 65,\n    B = 66,\n    C = 67,\n\n    D = 68,\n\n    I = 73,\n    J = 74,\n    K = 75,\n\n    L = 76,\n    M = 77,\n    N = 78,\n    O = 79,\n    P = 80,\n    \n    S = 83,\n    T = 84,\n    U = 85,\n    V = 86,\n\n    W = 87,\n    X = 88,\n\n    Z = 90,\n}\n\nclass Controls {\n\n    /** Value is true if Key is pressed. */\n    private readonly keyMap: Map<Key, boolean> = new Map();\n\n    /** Key to action it's bound to. */\n    private readonly assignedControlMap: Map<Key, string> = new Map();\n\n    constructor() {\n        document.onkeydown = (e: KeyboardEvent) => {\n            this.keyMap.set(e.keyCode, true);\n        };\n        document.onkeyup = (e: KeyboardEvent) => {\n            this.keyMap.set(e.keyCode, false);\n        };\n    }\n\n    isKeyDown(key: Key): boolean {\n        return this.keyMap.get(key);\n    }\n\n    addAssignedControl(key: Key, action: string) {\n        if (this.assignedControlMap.has(key)) {\n            throw new Error(`Double-bound a control: ${key}`);\n        }\n        this.assignedControlMap.set(key, action);\n    }\n\n    removeAssignedControl(key: Key) {\n        if (!this.assignedControlMap.has(key)) {\n            throw new Error('Removing unassigned control');\n        }\n        this.assignedControlMap.delete(key);\n    }\n\n    getAssignedControlMap(): Map<Key, string> {\n        return this.assignedControlMap;\n    }\n\n    getStringForKey(key: Key) {\n        switch(key) {\n            case Key.A:\n                return 'A';\n            case Key.B:\n                return 'B';\n            case Key.D:\n                return 'D';\n            case Key.W:\n                return 'W';\n            case Key.S:\n                return 'S';\n            case Key.J:\n                return 'J';\n            case Key.L:\n                return 'L';\n            case Key.N:\n                return 'N';\n            case Key.ONE:\n                return '1';\n            case Key.TWO:\n                return '2';\n            case Key.THREE:\n                return '3';\n            case Key.FOUR:\n                return '4';\n            case Key.SPACE:\n                return 'Space';\n            default:\n                throw new Error(\"Need to add string for Key\");\n        }\n    }\n}\n\nexport const CONTROLS = new Controls();","import { vec3, mat4 } from 'gl-matrix';\nimport { Buffers } from '../buffers';\nimport { BaseShaderProgram } from 'src/app/shaders/base_shader_program';\nimport { makeVec, addVec, Triangle } from 'src/app/math_utils';\n\nexport abstract class Renderable {\n\n    buffers: Buffers;\n\n    positions: number[] = [];\n    normals: number[] = [];\n\n    getPositions(): number[] {\n        return this.positions;\n    }\n\n    getNormals(): number[] {\n        return this.normals;\n    }\n\n    protected addTriangles(triangles: Triangle[]): void {\n        for (let triangle of triangles) {\n            const triNormal = triangle.getNormal();\n            vec3.normalize(triNormal, triNormal);\n            addVec(this.positions, triangle.a);\n            addVec(this.positions, triangle.b);\n            addVec(this.positions, triangle.c);\n            addVec(this.normals, triNormal);\n            addVec(this.normals, triNormal);\n            addVec(this.normals, triNormal);\n        }\n    }\n\n    initBuffers(gl: WebGLRenderingContext) {\n        const positionBuffer = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER,\n            new Float32Array(this.getPositions()),\n            gl.STATIC_DRAW);\n\n        const normalBuffer = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, normalBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.getNormals()),\n            gl.STATIC_DRAW);\n\n        this.buffers = {\n            position: positionBuffer,\n            normal: normalBuffer,\n        };\n    }\n\n    render(gl: WebGLRenderingContext, program: BaseShaderProgram, modelMatrix: mat4) {\n\n        // Projection & view matrices uniform is expected to be set already.\n\n        const normalMatrix = mat4.create();\n        mat4.invert(normalMatrix, modelMatrix);\n        mat4.transpose(normalMatrix, normalMatrix);\n\n        // Tell WebGL how to pull out the positions from the position\n        // buffer into the vertexPosition attribute.\n        {\n            const numComponents = 3;  // pull out 3 values per iteration\n            const type = gl.FLOAT;    // the data in the buffer is 32bit floats\n            const normalize = false;  // don't normalize\n            const stride = 0;         // how many bytes to get from one set of values to the next\n            // 0 = use type and numComponents above\n            const offset = 0;         // how many bytes inside the buffer to start from\n            gl.bindBuffer(gl.ARRAY_BUFFER, this.buffers.position);\n            gl.vertexAttribPointer(\n                program.attribLocations.vertexPosition,\n                numComponents,\n                type,\n                normalize,\n                stride,\n                offset);\n            gl.enableVertexAttribArray(\n                program.attribLocations.vertexPosition);\n        }\n\n        // Tell WebGL how to pull out the normals from\n        // the normal buffer into the vertexNormal attribute.\n        {\n            const numComponents = 3;\n            const type = gl.FLOAT;\n            const normalize = false;\n            const stride = 0;\n            const offset = 0;\n            gl.bindBuffer(gl.ARRAY_BUFFER, this.buffers.normal);\n            gl.vertexAttribPointer(\n                program.attribLocations.vertexNormal,\n                numComponents,\n                type,\n                normalize,\n                stride,\n                offset);\n            gl.enableVertexAttribArray(\n                program.attribLocations.vertexNormal);\n        }\n\n        // Tell WebGL to use our program when drawing\n        gl.useProgram(program.program);\n\n        // Set the shader uniforms\n        gl.uniformMatrix4fv(\n            program.uniformLocations.modelMatrix,\n            false,\n            modelMatrix);\n        gl.uniformMatrix4fv(\n            program.uniformLocations.normalMatrix,\n            false,\n            normalMatrix);\n\n        {\n            const vertexCount = this.getPositions().length / 3;\n            const type = gl.UNSIGNED_SHORT;\n            const offset = 0;\n            // gl.LINE_STRIP\n            gl.drawArrays(gl.TRIANGLES, 0, vertexCount);\n        }\n    }\n}","import { vec3, mat4 } from 'gl-matrix';\n\nimport { Renderable } from './renderable';\nimport { makeVec, addVec, getTrianglesFromSquares, Square, Triangle } from '../math_utils';\n\nclass CarBodyRenderable extends Renderable {\n\n  readonly LENGTH = 20;\n  readonly bodyWidth = 4;\n  readonly xOffset = this.bodyWidth / 2;\n  readonly groundOffset = 2;\n  readonly height = 4;\n  readonly yMin = this.groundOffset;\n  readonly yMax = this.groundOffset + this.height;\n  readonly length = 20;\n  readonly zOffset = this.LENGTH / 2;\n\n  constructor() {\n    super();\n\n    const squares = [];\n\n    // Front four car body vertices:\n    const tlf = makeVec(-this.xOffset, this.yMax, -this.zOffset);\n    const blf = makeVec(-this.xOffset, this.yMin, -this.zOffset);\n    const trf = makeVec(this.xOffset, this.yMax, -this.zOffset);\n    const brf = makeVec(this.xOffset, this.yMin, -this.zOffset);\n\n    const indent = true;\n    if (indent) {\n      const xIndent = .5;\n      tlf[0] += xIndent;\n      trf[0] -= xIndent;\n      blf[0] += xIndent;\n      brf[0] -= xIndent;\n      const yIndent = 1.5;\n      tlf[1] -= yIndent;\n      trf[1] -= yIndent;\n    }\n\n    // Back four vertices\n    const tlb = makeVec(-this.xOffset, this.yMax, this.zOffset);\n    const blb = makeVec(-this.xOffset, this.yMin, this.zOffset);\n    const trb = makeVec(this.xOffset, this.yMax, this.zOffset);\n    const brb = makeVec(this.xOffset, this.yMin, this.zOffset);\n\n    const frontFace: Square = new Square({\n      a: trf, b: brf, c: blf, d: tlf,\n    });\n    squares.push(frontFace);\n\n    const backFace: Square = new Square({\n      a: tlb, b: blb, c: brb, d: trb,\n    });\n    squares.push(backFace);\n\n    const topFace: Square = new Square({\n      a: tlf, b: tlb, c: trb, d: trf,\n    });\n    squares.push(topFace);\n\n    const bottomFace: Square = new Square({\n      a: brf, b: brb, c: blb, d: blf,\n    });\n    squares.push(bottomFace);\n\n    const leftFace: Square = new Square({\n      a: tlf, b: blf, c: blb, d: tlb,\n    });\n    squares.push(leftFace);\n\n    const rightFace: Square = new Square({\n      a: trb, b: brb, c: brf, d: trf,\n    });\n    squares.push(rightFace);\n\n    this.positions = [];\n    this.normals = [];\n    const triangles: Triangle[] = getTrianglesFromSquares(squares);\n    this.addTriangles(triangles);\n  }\n}\n\nexport const CAR_BODY_RENDERABLE = new CarBodyRenderable();","import { vec3, mat4 } from 'gl-matrix';\nimport { Renderable } from './renderable';\nimport { makeVec, addVec, Square, Triangle } from '../math_utils';\n\nclass WheelRenderable extends Renderable {\n  positions: number[] = [];\n  normals: number[] = [];\n\n  getPositions(): number[] {\n    return this.positions;\n  }\n\n  getNormals(): number[] {\n    return this.normals;\n  }\n\n  constructor() {\n    super();\n\n    const squares: Square[] = [];\n    const triangles: Triangle[] = [];\n\n    // WHEELS:\n    // Cylinder with circles on left,right\n    const wheelWidth = 2;\n    const wheelRadius = 2;\n    const wheelXOffset = wheelWidth / 2;\n\n    const wheelSquares: Square[] = [];\n    const deltaTheta = Math.PI / 12;\n\n    // First make a circle centered at 0,0,0, about the x-axis\n    // Normal is going left, negative x axis.\n    const circleTriangles = [];\n    const circleCenter = makeVec(0, 0, 0);\n    for (let theta = 0; theta < Math.PI * 2; theta += deltaTheta) {\n      // X is fixed, z = cos, y = sin\n      const cosA = Math.cos(theta);\n      const sinA = Math.sin(theta);\n      const ptA = makeVec(0, sinA * wheelRadius, cosA * wheelRadius);\n      const cosB = Math.cos(theta + deltaTheta);\n      const sinB = Math.sin(theta + deltaTheta);\n      const ptB = makeVec(0, sinB * wheelRadius, cosB * wheelRadius);\n      circleTriangles.push(new Triangle(ptB, vec3.clone(circleCenter), ptA));\n    }\n\n    // Then copy and translate the circle to make left and right faces of wheel:\n    circleTriangles.forEach((tri: Triangle) => {\n      const leftTriangle = tri.clone().translate(makeVec(-wheelXOffset, 0, 0));\n      const rightTriangle = tri.clone().translate(makeVec(wheelXOffset, 0, 0)).flip();\n      const cylinderSquare = new Square({\n        a: vec3.clone(leftTriangle.a),\n        b: vec3.clone(leftTriangle.c),\n        c: vec3.clone(rightTriangle.a),\n        d: vec3.clone(rightTriangle.c),\n      });\n      triangles.push(leftTriangle);\n      triangles.push(rightTriangle);\n      squares.push(cylinderSquare);\n    });\n\n    this.positions = [];\n    this.normals = [];\n    for (let square of squares) {\n      const triA = new Triangle(square.a, square.b, square.d);\n      const triB = new Triangle(square.b, square.c, square.d);\n      triangles.push(triA);\n      triangles.push(triB);\n    }\n    for (let triangle of triangles) {\n      const triNormal = triangle.getNormal();\n      vec3.normalize(triNormal, triNormal);\n      addVec(this.positions, triangle.a);\n      addVec(this.positions, triangle.b);\n      addVec(this.positions, triangle.c);\n      addVec(this.normals, triNormal);\n      addVec(this.normals, triNormal);\n      addVec(this.normals, triNormal);\n    }\n  }\n}\n\nexport const WHEEL_RENDERABLE = new WheelRenderable();","import { vec3, vec4, mat4 } from 'gl-matrix';\nimport { makeVec, makeVec4, addVec } from 'src/app/math_utils';\n\n\nexport enum LightType {\n    DIRECTIONAL,\n    POINT,\n    SPOT,\n}\n\nexport interface LightColor {\n    ambient: vec4;\n    diffuse: vec4;\n    specular: vec4;\n}\n\nexport interface DirectionalLight {\n    readonly lightType: LightType.DIRECTIONAL;\n\n    direction: vec3;\n    lightColor: LightColor;\n}\n\nexport interface PointLight {\n    readonly lightType: LightType.POINT;\n\n    position: vec3;\n    lightColor: LightColor;\n\n    constant: 1,\n    linear: number,\n    quadratic: number,\n}\n\nexport interface SpotLight {\n    readonly lightType: LightType.SPOT;\n\n    position: vec3;\n    lightColor: LightColor;\n\n    direction: vec3;\n    lowerLimit: number;\n    upperLimit: number;\n\n    constant: 1,\n    linear: number,\n    quadratic: number,\n}\n\nexport type Light = DirectionalLight | PointLight | SpotLight;","import { vec3, mat4 } from 'gl-matrix';\nimport { makeVec, addVec } from 'src/app/math_utils';\nimport { StandardShaderProgram } from 'src/app/shaders/standard_shader_program';\nimport { LightShaderProgram } from 'src/app/shaders/light_shader_program';\nimport { Light } from 'src/app/lights/lights';\n\nexport class GameObject {\n    position: vec3 = makeVec(0, 0, 0);\n    scale: Float32Array = new Float32Array([1, 1, 1]);\n\n    update(elapsedTime: number): void { }\n\n    render(gl: WebGLRenderingContext, program: StandardShaderProgram): void { }\n\n    getLights(): Light[] {\n        return [];\n    }\n\n    renderLight(gl: WebGLRenderingContext, program: LightShaderProgram): void { }\n\n    renderTranslucents(gl: WebGLRenderingContext, program: StandardShaderProgram): void { }\n}","import { vec3, mat4 } from 'gl-matrix';\nimport { Renderable } from './renderable';\nimport { makeVec, addVec, Square, Triangle } from 'src/app/math_utils';\n\nclass CubeRenderable extends Renderable {\n\n  constructor() {\n    super();\n\n    const squares = [];\n\n    // Front four vertices:\n    const tlf = makeVec(-1, 1, -1);\n    const blf = makeVec(-1, -1, -1);\n    const trf = makeVec(1, 1, -1);\n    const brf = makeVec(1, -1, -1);\n\n    // Back four vertices\n    const tlb = makeVec(-1, 1, 1);\n    const blb = makeVec(-1, -1, 1);\n    const trb = makeVec(1, 1, 1);\n    const brb = makeVec(1, -1, 1);\n\n    const frontFace: Square = new Square({\n      a: trf, b: brf, c: blf, d: tlf,\n    });\n    squares.push(frontFace);\n\n    const backFace: Square = new Square({\n      a: tlb, b: blb, c: brb, d: trb,\n    });\n    squares.push(backFace);\n\n    const topFace: Square = new Square({\n      a: tlf, b: tlb, c: trb, d: trf,\n    });\n    squares.push(topFace);\n\n    const bottomFace: Square = new Square({\n      a: brf, b: brb, c: blb, d: blf,\n    });\n    squares.push(bottomFace);\n\n    const leftFace: Square = new Square({\n      a: tlf, b: blf, c: blb, d: tlb,\n    });\n    squares.push(leftFace);\n\n    const rightFace: Square = new Square({\n      a: trb, b: brb, c: brf, d: trf,\n    });\n    squares.push(rightFace);\n\n    this.positions = [];\n    this.normals = [];\n    const triangles: Triangle[] = [];\n    for (let square of squares) {\n      const triA = new Triangle(square.a, square.b, square.d);\n      const triB = new Triangle(square.b, square.c, square.d);\n      triangles.push(triA);\n      triangles.push(triB);\n    }\n    for (let triangle of triangles) {\n      const triNormal = triangle.getNormal();\n      vec3.normalize(triNormal, triNormal);\n      vec3.normalize(triNormal, triNormal);\n      addVec(this.positions, triangle.a);\n      addVec(this.positions, triangle.b);\n      addVec(this.positions, triangle.c);\n      addVec(this.normals, triNormal);\n      addVec(this.normals, triNormal);\n      addVec(this.normals, triNormal);\n    }\n  }\n}\n\nexport const CUBE_RENDERABLE = new CubeRenderable();","import { vec3, mat4 } from 'gl-matrix';\nimport { GameObject } from 'src/app/game_objects/game_object';\nimport { StandardShaderProgram } from 'src/app/shaders/standard_shader_program';\nimport { Material } from 'src/app/material';\nimport { makeVec4, makeVec } from 'src/app/math_utils';\nimport { CUBE_RENDERABLE } from 'src/app/renderables/cube_renderable';\nimport { Light, PointLight, LightType } from 'src/app/lights/lights';\nimport { LightShaderProgram } from 'src/app/shaders/light_shader_program';\n\nexport enum PowerUpType {\n    SHIELD = 'Shield',\n    OTHER = 'Other',\n}\n\nclass BasePowerUp extends GameObject {\n    powerUpType: PowerUpType;\n\n    material: Material;\n    private yRotation: number;\n\n    light: PointLight = {\n        position: this.position,\n        lightType: LightType.POINT,\n        lightColor: {\n            ambient: makeVec4(0, 0, 1, 1),\n            diffuse: makeVec4(0, 0, 1, 1),\n            specular: makeVec4(0, 0, 1, 1),\n        },\n        constant: 1,\n        linear: .002,\n        quadratic: .03,\n    }\n\n    constructor() {\n        super();\n        const s = 3;\n        this.scale = new Float32Array([s, s, s]);\n\n        this.yRotation = Math.random() * Math.PI / 2.0;\n    }\n\n    update(elapsedMs: number) {\n        this.yRotation += (elapsedMs / 800);\n        this.light.position = this.position;\n    }\n\n    render(gl: WebGLRenderingContext, program: StandardShaderProgram) {\n        program.setMaterialUniform(gl, this.material);\n\n        const model = mat4.create();\n        mat4.translate(model, model, this.position);\n        mat4.rotate(model, model, this.yRotation, [0, 1, 0]);\n        mat4.scale(model, model, this.scale);\n        CUBE_RENDERABLE.render(gl, program, model);\n    }\n\n    getLights(): Light[] {\n        return [this.light];\n    }\n\n    renderLight(gl: WebGLRenderingContext, program: LightShaderProgram) {\n        const lightColor = makeVec4(this.material.ambient[0], this.material.ambient[1], this.material.ambient[2], .5);\n        program.setColor(gl, lightColor);\n        const model = mat4.create();\n        mat4.translate(model, model, this.position);\n        mat4.rotate(model, model, this.yRotation, [0, 1, 0]);\n        const sf = .5\n        const scaleL = vec3.add(vec3.create(), this.scale, makeVec(sf, sf, sf));\n        mat4.scale(model, model, scaleL);\n        CUBE_RENDERABLE.render(gl, program, model);\n    }\n}\n\nexport class Shield extends BasePowerUp {\n    powerUpType: PowerUpType.SHIELD = PowerUpType.SHIELD;\n\n    constructor() {\n        super();\n        this.material = {\n            ambient: makeVec4(0.0, 0.0, .8, 1.0),\n            diffuse: makeVec4(0.0, 0.0, .8, 1.0),\n            specular: makeVec4(0.0, 0.0, .8, 1.0),\n            shininess: 6,\n        };\n    }\n}\n\nexport type PowerUp = Shield;","import { Renderable } from './renderable';\nimport { vec3, mat4 } from 'gl-matrix';\nimport { makeVec, addVec, Square, Triangle, getTrianglesFromSquares } from '../math_utils';\n\nclass HalfSphereRenderable extends Renderable {\n\n    constructor() {\n        super();\n\n        const squares: Square[] = [];\n        const deltaPhi = Math.PI / 36;\n        const TWO_PI = Math.PI * 2.0;\n        const PI_OVER_TWO = Math.PI / 2.0;\n        for (let yheda = 0; yheda < PI_OVER_TWO - deltaPhi; yheda += deltaPhi) {\n            const y = Math.sin(yheda);\n            const y2 = Math.sin(yheda + deltaPhi);\n            const cosY = Math.cos(yheda);\n            const cosY2 = Math.cos(yheda + deltaPhi);\n            for (let theta = 0; theta < TWO_PI - deltaPhi; theta += deltaPhi) {\n                const x = Math.cos(theta);\n                const z = Math.sin(theta);\n                const x2 = Math.cos(theta + deltaPhi);\n                const z2 = Math.sin(theta + deltaPhi);\n                const d = vec3.normalize(vec3.create(), makeVec(x * cosY2, y2, z * cosY2));\n                const c = vec3.normalize(vec3.create(), makeVec(x * cosY, y, z * cosY));\n                const b = vec3.normalize(vec3.create(), makeVec(x2 * cosY, y, z2 * cosY));\n                const a = vec3.normalize(vec3.create(), makeVec(x2 * cosY2, y2, z2 * cosY2));\n                squares.push(new Square({ a, b, c, d }));\n            }\n        }\n        const triangles = getTrianglesFromSquares(squares);\n        this.addTriangles(triangles);\n    }\n}\n\nexport const HALF_SPHERE_RENDERABLE = new HalfSphereRenderable();","import { vec3, mat4 } from 'gl-matrix';\n\nimport { makeVec, makeVec4, addVec, hasSignChange, sign, Square, EPSILON } from 'src/app/math_utils';\nimport { GameObject } from 'src/app/game_objects/game_object';\nimport { Material } from 'src/app/material';\nimport { StandardShaderProgram } from 'src/app/shaders/standard_shader_program';\n\nimport { CUBE_RENDERABLE } from 'src/app/renderables/cube_renderable';\n\nexport class Projectile extends GameObject {\n\n    private readonly material: Material = {\n        ambient: makeVec4(1, .8, 0, 1.0),\n        diffuse: makeVec4(1, .8, 0, 1.0),\n        specular: makeVec4(1, 1.0, 1.0, 1.0),\n        shininess: .1,\n    }\n\n    readonly damage = 20;\n    readonly fireSpeed: number = .08;\n    readonly initialVelocity: vec3;\n    readonly initialPosition: vec3;\n    timeElapsedMs: number;\n\n    position: vec3;\n\n    constructor(initialPosition: vec3, initialDirection: vec3) {\n        super();\n        this.initialPosition = vec3.clone(initialPosition);\n        this.position = vec3.clone(initialPosition);\n        const direction = vec3.normalize(vec3.create(), vec3.clone(initialDirection));\n        this.initialVelocity = vec3.scale(vec3.create(), direction, this.fireSpeed);\n        this.timeElapsedMs = 0;\n    }\n\n    // DeltaX = v0 * t + .5 * a * t^2\n    update(elapsedMs: number) {\n        this.timeElapsedMs += elapsedMs;\n\n        const positionUpdate = vec3.create();\n        const v0t = vec3.scale(vec3.create(), this.initialVelocity, this.timeElapsedMs);\n        const halfAtSquared = makeVec(0, 0, 0);\n        vec3.add(positionUpdate, v0t, halfAtSquared);\n        vec3.add(this.position, this.position, positionUpdate);\n    }\n\n    render(gl: WebGLRenderingContext, program: StandardShaderProgram): void {\n        program.setMaterialUniform(gl, this.material);\n\n        const model = mat4.create();\n\n        const scaleAmount = makeVec(.25, .25, .55);\n        const scale = mat4.scale(mat4.create(), mat4.create(), scaleAmount);\n\n        const direction = vec3.add(vec3.create(), this.position, this.initialVelocity);\n        const orientation = mat4.targetTo(mat4.create(), this.position, direction, [0, 1, 0]);\n\n        mat4.multiply(model, orientation, scale);\n        CUBE_RENDERABLE.render(gl, program, model);\n    }\n}","import { vec3, mat4 } from 'gl-matrix';\n\nimport { makeVec, makeVec4, addVec, hasSignChange, sign, Square, EPSILON } from 'src/app/math_utils';\nimport { Projectile } from 'src/app/game_objects/projectile';\nimport { GameObject } from 'src/app/game_objects/game_object';\nimport { StandardShaderProgram } from 'src/app/shaders/standard_shader_program';\n\nexport class Gun extends GameObject {\n\n    private readonly timeBetweenShotsMs: number = 100;\n    private timeSinceLastShot: number = 0;\n\n    update(elapsedMs: number) {\n        this.timeSinceLastShot += elapsedMs;\n    }\n\n    isReadyToShoot(): boolean {\n        return this.timeSinceLastShot > this.timeBetweenShotsMs;\n    }\n\n    shoot(origin: vec3, forwardDirection: vec3, orientation: mat4): Projectile {\n        this.timeSinceLastShot = 0;\n        const projectile = new Projectile(origin, forwardDirection);\n        return projectile;\n    }\n\n    render(gl: WebGLRenderingContext, program: StandardShaderProgram): void {\n\n    }\n}","import { vec3, mat4 } from 'gl-matrix';\nimport { makeVec } from 'src/app/math_utils';\n\n\nexport class Ray {\n    readonly origin: vec3;\n    readonly direction: vec3;\n    readonly inverseDirection: vec3;\n    readonly sign: number[];\n\n    constructor(origin: vec3, direction: vec3) {\n        this.origin = origin;\n        this.direction = direction;\n        this.inverseDirection = makeVec(1 / this.direction[0], 1 / this.direction[1], 1 / this.direction[2]);\n        this.sign = [\n            this.inverseDirection[0] < 0 ? 1 : 0,\n            this.inverseDirection[1] < 0 ? 1 : 0,\n            this.inverseDirection[2] < 0 ? 1 : 0,\n        ];\n    }\n}\n\nexport class Box {\n    bounds: vec3[];\n\n    constructor(min: vec3, max: vec3) {\n        this.bounds = [vec3.clone(min), vec3.clone(max)];\n    }\n}\n\nclass Collision {\n\n    // Thanks http://www.cs.utah.edu/~awilliam/box/box.pdf\n    rayIntersectsBox(ray: Ray, box: Box, t0: number, t1: number): boolean {\n\n        let tMin = (box.bounds[ray.sign[0]][0] - ray.origin[0]) * ray.inverseDirection[0];\n        let tMax = (box.bounds[1 - ray.sign[0]][0] - ray.origin[0]) * ray.inverseDirection[0];\n        const tyMin = (box.bounds[ray.sign[1]][1] - ray.origin[1]) * ray.inverseDirection[1];\n        const tyMax = (box.bounds[1 - ray.sign[1]][1] - ray.origin[1]) * ray.inverseDirection[1];\n        if (tMin > tyMax || tyMin > tMax) {\n            return false;\n        }\n        if (tyMin > tMin) {\n            tMin = tyMin;\n        }\n        if (tyMax < tMax) {\n            tMax = tyMax;\n        }\n        const tzMin = (box.bounds[ray.sign[2]][2] - ray.origin[2]) * ray.inverseDirection[2];\n        const tzMax = (box.bounds[1 - ray.sign[2]][2] - ray.origin[2]) * ray.inverseDirection[2];\n        if (tMin > tzMax || tzMin > tMax) {\n            return false;\n        }\n        if (tzMin > tMin) {\n            tMin = tzMin;\n        }\n        if (tzMax < tMax) {\n            tMax = tzMax;\n        }\n\n        return tMin < t1 && tMax > t0;\n    }\n\n    pointInBox(point: vec3, box: Box): boolean {\n        return point[0] > box.bounds[0][0] && point[0] < box.bounds[1][0] &&\n            point[1] > box.bounds[0][1] && point[1] < box.bounds[1][1] &&\n            point[2] > box.bounds[0][2] && point[2] < box.bounds[1][2];\n    }\n}\n\nexport const COLLISION = new Collision();","import { vec3, mat4 } from 'gl-matrix';\n\nimport { makeVec, makeVec4, addVec, hasSignChange, sign, Square, EPSILON } from 'src/app/math_utils';\nimport { StandardShaderProgram } from 'src/app/shaders/standard_shader_program';\nimport { CAR_BODY_RENDERABLE } from 'src/app/renderables/car_body_renderable';\nimport { WHEEL_RENDERABLE } from 'src/app/renderables/wheel_renderable';\nimport { CONTROLS } from 'src/app/controls';\nimport { Key } from 'src/app/controls';\nimport { GameObject } from './game_object';\nimport { Projectile } from 'src/app/game_objects/projectile';\nimport { Floor } from 'src/app/game_objects/floor';\nimport { Light, SpotLight, LightType } from 'src/app/lights/lights';\nimport { Material } from 'src/app/material';\nimport { LightShaderProgram } from 'src/app/shaders/light_shader_program';\nimport { CUBE_RENDERABLE } from 'src/app/renderables/cube_renderable';\nimport { HALF_SPHERE_RENDERABLE } from 'src/app/renderables/half_sphere_renderable';\nimport { Gun } from 'src/app/game_objects/gun';\nimport { Box } from 'src/app/collision';\nimport { Ai } from 'src/app/ai';\nimport { PowerUp, PowerUpType } from 'src/app/game_objects/powerup';\n\nconst X_AXIS = makeVec(1, 0, 0);\nconst Y_AXIS = makeVec(0, 1, 0);\nconst Z_AXIS = makeVec(0, 0, -1);\n\nexport interface Input {\n  readonly isTurningLeft: boolean;\n  readonly isTurningRight: boolean;\n  readonly isGasPedalDown: boolean;\n  readonly isBrakePedalDown: boolean;\n  readonly isShooting: boolean;\n}\n\nexport class Car extends GameObject {\n  readonly isRenderAabb: boolean = false;\n\n  private isUsingControls: boolean = false;\n  ai: Ai;\n\n  readonly gun: Gun = new Gun();\n  private projectiles: Projectile[] = [];\n\n  health: number = 100;\n  private hasShield: boolean = false;\n  private shieldHealth: number = 100;\n  readonly MAX_SHIELD_HEALTH = 100;\n\n  // Colors/materials\n  readonly bodyColor = [1, 0, 0, 1];\n  readonly wheelColor = [.2, .2, .2, 1];\n\n  readonly DEFAULT_BODY_MATERIAL: Material = {\n    ambient: makeVec4(1, 0, 0, 1),\n    diffuse: makeVec4(1, 0, 0, 1),\n    specular: makeVec4(1, 0, 1, 1),\n    shininess: 1,\n  };\n  bodyMaterial = this.DEFAULT_BODY_MATERIAL;\n\n  readonly wheelMaterial: Material = {\n    ambient: makeVec4(.2, .2, .2, 1),\n    diffuse: makeVec4(.2, .2, .2, 1),\n    specular: makeVec4(1, 1, 1, 1),\n    shininess: 69,\n  };\n\n  readonly headlightLocalPosition: vec3 = makeVec(0, CAR_BODY_RENDERABLE.groundOffset + CAR_BODY_RENDERABLE.height / 2.0, -CAR_BODY_RENDERABLE.zOffset + 0.25);\n  readonly headlightDownRotation: mat4 = mat4.rotateX(mat4.create(), mat4.create(), -Math.PI / 16.0);\n  readonly headlight: SpotLight = {\n    lightType: LightType.SPOT,\n    position: this.headlightLocalPosition,\n    lightColor: {\n      ambient: makeVec4(.3, .3, .3, 1.0),\n      diffuse: makeVec4(1, 1, 1, 1.0),\n      specular: makeVec4(1, 1, 1, 1.0),\n    },\n    direction: makeVec(0, 0, -1),\n    lowerLimit: Math.cos(Math.PI / 8),\n    upperLimit: Math.cos(Math.PI / 6),\n    constant: 1,\n    linear: 0.009,\n    quadratic: 0.0032,\n  };\n\n  xRotationAngle: number = 0;\n  yRotationAngle: number = 0;\n  zRotationAngle: number = 0;\n\n  velocity: vec3 = makeVec(0, 0, 0);\n  acceleration: vec3 = makeVec(0, 0, 0);\n  readonly accelerationPerGas: number = 1.1;\n  readonly restDecelerationRate: number = 10;\n  readonly brakeDecelerationRate: number = 30;\n  readonly maxAccelerationMagnitude: number = 20;\n  readonly maxVelocityMagnitude: number = 100;\n\n  wheelTurn: number = 0;\n  readonly wheelReturnToCenterRate: number = Math.PI / 80;\n  readonly wheelTurnRate: number = Math.PI / 180;\n  readonly maxWheelTurn: number = Math.PI / 6;\n\n  // Car body params.\n  readonly bodyWidth: number = 4;\n  readonly xOffset: number = this.bodyWidth / 2;\n  readonly groundOffset: number = 2;\n  readonly wheelZOffset: number = 6;\n\n  // These are relative to local space.\n  readonly frontLeftWheelPosition: vec3;\n  readonly backLeftWheelPosition: vec3;\n  readonly backRightWheelPosition: vec3;\n  readonly frontRightWheelPosition: vec3;\n\n  constructor(private readonly floor: Floor) {\n    super();\n    this.frontLeftWheelPosition = makeVec(-this.xOffset, this.groundOffset, -this.wheelZOffset);\n    this.backLeftWheelPosition = makeVec(-this.xOffset, this.groundOffset, this.wheelZOffset);\n    this.backRightWheelPosition = makeVec(this.xOffset, this.groundOffset, this.wheelZOffset);\n    this.frontRightWheelPosition = makeVec(this.xOffset, this.groundOffset, -this.wheelZOffset);\n  }\n\n  bindControls() {\n    this.isUsingControls = true;\n    CONTROLS.addAssignedControl(Key.W, \"gas\");\n    CONTROLS.addAssignedControl(Key.S, \"brake\");\n    CONTROLS.addAssignedControl(Key.A, \"turn left\");\n    CONTROLS.addAssignedControl(Key.D, \"turn right\");\n    CONTROLS.addAssignedControl(Key.SPACE, \"shoot\");\n  }\n\n  getUpVector(): vec3 {\n    const backWheelToFront = vec3.sub(vec3.create(), this.frontRightWheelPosition, this.backRightWheelPosition);\n    const leftWheelToRight = vec3.sub(vec3.create(), this.backRightWheelPosition, this.backLeftWheelPosition);\n    const up = vec3.cross(vec3.create(), leftWheelToRight, backWheelToFront);\n    return vec3.normalize(vec3.create(), up);\n  }\n\n  getForwardVector(): vec3 {\n    const backToFront = vec3.sub(vec3.create(), this.frontRightWheelPosition, this.backRightWheelPosition);\n    const localForward = vec3.normalize(vec3.create(), backToFront);\n    const worldForward = vec3.transformMat4(vec3.create(), localForward, this.getRotationMatrix());\n    return vec3.normalize(worldForward, worldForward);\n  }\n\n  getBackwardVector(): vec3 {\n    const frontToBack = vec3.sub(vec3.create(), this.backRightWheelPosition, this.frontRightWheelPosition)\n    const localBackward = vec3.normalize(vec3.create(), frontToBack);\n    const worldBackward = vec3.transformMat4(vec3.create(), localBackward, this.getRotationMatrix());\n    return vec3.normalize(worldBackward, worldBackward);\n  }\n\n  getInput(): Input {\n    if (this.isUsingControls) {\n      const isTurningLeft = CONTROLS.isKeyDown(Key.A);\n      const isTurningRight = CONTROLS.isKeyDown(Key.D);\n      const isGasPedalDown = CONTROLS.isKeyDown(Key.W);\n      const isBrakePedalDown = CONTROLS.isKeyDown(Key.S);\n      const isShooting = CONTROLS.isKeyDown(Key.SPACE);\n      return {\n        isTurningLeft,\n        isTurningRight,\n        isGasPedalDown,\n        isBrakePedalDown,\n        isShooting,\n      };\n    }\n    return this.ai.getInput();\n  }\n\n  update(elapsedMs: number): void {\n    const elapsedSeconds = elapsedMs / 1000;\n    // First update position based on current velocity.\n    const deltaPosition = vec3.scale(vec3.create(), this.velocity, elapsedSeconds);\n    vec3.add(this.position, this.position, deltaPosition);\n\n    // Then calculate new acceleration.\n    const velocityNormalized = vec3.normalize(vec3.create(), this.velocity);\n    const velocityMag = vec3.length(this.velocity);\n\n    const {\n      isTurningLeft,\n      isTurningRight,\n      isGasPedalDown,\n      isBrakePedalDown,\n      isShooting,\n    } = this.getInput();\n\n    // Handle shooting:\n    this.gun.update(elapsedMs);\n    if (isShooting && this.gun.isReadyToShoot()) {\n      const gunPosition = vec3.create();\n      const forward = this.getForwardVector();\n      const offset = vec3.clone(forward);\n      vec3.scale(offset, offset, CAR_BODY_RENDERABLE.zOffset + 8.0);\n      vec3.add(offset, offset, makeVec(0, 3, 0));\n      vec3.add(gunPosition, this.position, offset);\n      this.projectiles.push(this.gun.shoot(gunPosition, forward, this.getRotationMatrix()));\n    }\n\n    // Determine wheel orientation:\n    const areWheelsStraight = Math.abs(this.wheelTurn) < EPSILON;\n    if (isTurningRight && !isTurningLeft) {\n      this.wheelTurn = Math.max(-this.maxWheelTurn, this.wheelTurn - this.wheelTurnRate);\n    } else if (isTurningLeft && !isTurningRight) {\n      this.wheelTurn = Math.min(this.maxWheelTurn, this.wheelTurn + this.wheelTurnRate);\n    } else if (!areWheelsStraight && !isTurningLeft && !isTurningRight) {\n      const newWheelTurn = this.wheelReturnToCenterRate * -sign(this.wheelTurn) + this.wheelTurn;\n      if (hasSignChange(this.wheelTurn, newWheelTurn)) {\n        this.wheelTurn = 0.0;\n      } else {\n        this.wheelTurn = newWheelTurn;\n      }\n    }\n\n    const accelerationMag = vec3.length(this.acceleration);\n\n    if (!areWheelsStraight) {\n      const distanceBetweenWheelsVec = vec3.create();\n      vec3.sub(distanceBetweenWheelsVec, this.frontLeftWheelPosition, this.backLeftWheelPosition);\n      const distanceBetweenWheels = vec3.length(distanceBetweenWheelsVec);\n      const turnCircleRadius = distanceBetweenWheels / Math.sin((Math.PI / 2) - this.wheelTurn);\n      const angularVelocity = velocityMag / turnCircleRadius;\n      const rotationAngleUpdate = sign(this.wheelTurn) * angularVelocity * elapsedSeconds;\n\n      // TODO should use this.getUpVector()\n      const rotatedVelocity = vec3.rotateY(\n        vec3.create(),\n        velocityNormalized,\n        makeVec(0, 0, 0),\n        rotationAngleUpdate);\n      this.velocity = vec3.scale(rotatedVelocity, rotatedVelocity, velocityMag);\n\n      const accelerationNormalized = vec3.normalize(vec3.create(), this.acceleration);\n      const rotatedAcceleration = vec3.rotateY(\n        vec3.create(), accelerationNormalized, makeVec(0, 0, 0), rotationAngleUpdate);\n      this.acceleration = vec3.scale(rotatedAcceleration, rotatedAcceleration, accelerationMag);\n\n      this.yRotationAngle += rotationAngleUpdate;\n    }\n\n    const oppositeVelocityNormalized = vec3.scale(vec3.create(), velocityNormalized, -1.0);\n    const isCoasting = !isBrakePedalDown && !isGasPedalDown && velocityMag > EPSILON;\n    const forward = this.getForwardVector();\n    if (isGasPedalDown && !isBrakePedalDown) {\n      const acclerationUpdate = vec3.scale(forward, forward, this.accelerationPerGas);\n      const newAcceleration = vec3.add(vec3.create(), this.acceleration, acclerationUpdate);\n      if (vec3.length(newAcceleration) < this.maxAccelerationMagnitude) {\n        this.acceleration = newAcceleration;\n      }\n    } else if (isBrakePedalDown && !isGasPedalDown && velocityMag > EPSILON) {\n      vec3.scale(this.acceleration, oppositeVelocityNormalized, this.brakeDecelerationRate);\n    } else if (isCoasting) {\n      vec3.scale(this.acceleration, oppositeVelocityNormalized, this.restDecelerationRate);\n    }\n\n    // Update velocity based on acceleration:\n    const prevVelocity = vec3.clone(this.velocity);\n    const newVelocity = vec3.add(vec3.create(), this.velocity, vec3.scale(vec3.create(), this.acceleration, elapsedSeconds));\n    const prevNewDot = vec3.dot(prevVelocity, newVelocity);\n    if ((isCoasting || isBrakePedalDown) && prevNewDot <= 0.0) {\n      this.velocity = makeVec(0.0, 0.0, 0.0);\n      this.acceleration = makeVec(0.0, 0.0, 0.0);\n    } else {\n      this.velocity = newVelocity;\n      const newVelocityMagnitude = vec3.length(this.velocity);\n      if (newVelocityMagnitude > this.maxVelocityMagnitude) {\n        vec3.normalize(this.velocity, this.velocity);\n        vec3.scale(this.velocity, this.velocity, this.maxVelocityMagnitude);\n      }\n    }\n\n    // Update car body's y position:\n    this.position[1] = this.floor.getYAtXZ(this.position[0], this.position[2]);\n\n    // Now rotate so wheels are on ground:\n    // First, figure out the rotation about the car's x-axis\n    const model = this.getCarBodyModelWithJustYRotation();\n    const frontLeftWheelPosWorld = vec3.create();\n    const backLeftWheelPosWorld = vec3.create();\n    vec3.transformMat4(frontLeftWheelPosWorld, this.frontLeftWheelPosition, model);\n    const frontLeftY = this.floor.getYAtXZ(frontLeftWheelPosWorld[0], frontLeftWheelPosWorld[2]);\n    vec3.transformMat4(backLeftWheelPosWorld, this.backLeftWheelPosition, model);\n    const backLeftY = this.floor.getYAtXZ(backLeftWheelPosWorld[0], backLeftWheelPosWorld[2]);\n    const frontLeftWheelWorldWithY = makeVec(frontLeftWheelPosWorld[0], frontLeftY, frontLeftWheelPosWorld[2]);\n    let backLeftWheelWorldWithY = makeVec(backLeftWheelPosWorld[0], backLeftY, backLeftWheelPosWorld[2]);\n\n    const backToFront = vec3.sub(vec3.create(), frontLeftWheelWorldWithY, backLeftWheelWorldWithY);\n    const backToFrontFlat = vec3.sub(vec3.create(), frontLeftWheelPosWorld, backLeftWheelPosWorld);\n\n    this.xRotationAngle = vec3.angle(backToFront, backToFrontFlat);\n    if (backToFrontFlat[1] > backToFront[1]) {\n      this.xRotationAngle *= -1.0;\n    }\n\n    // Then update model matrix and use to calc rotation about car's Z-axis.\n    const xRot = mat4.rotate(mat4.create(), mat4.create(), this.xRotationAngle, X_AXIS);\n    mat4.multiply(model, model, xRot);\n    vec3.transformMat4(backLeftWheelPosWorld, this.backLeftWheelPosition, model);\n    backLeftWheelWorldWithY = makeVec(backLeftWheelPosWorld[0], backLeftY, backLeftWheelPosWorld[2]);\n    const backRightWheelPosWorld = vec3.create();\n    vec3.transformMat4(backRightWheelPosWorld, this.backRightWheelPosition, model);\n    const backRightY = this.floor.getYAtXZ(backRightWheelPosWorld[0], backRightWheelPosWorld[2]);\n    const backRightWheelPosWorldWithY = makeVec(backRightWheelPosWorld[0], backRightY, backRightWheelPosWorld[2]);\n\n    const leftToRight = vec3.sub(vec3.create(), backRightWheelPosWorldWithY, backLeftWheelWorldWithY);\n    const leftToRightFlat = vec3.sub(vec3.create(), backRightWheelPosWorld, backLeftWheelPosWorld);\n\n    this.zRotationAngle = vec3.angle(leftToRight, leftToRightFlat);\n    if (leftToRightFlat[1] < leftToRight[1]) {\n      this.zRotationAngle *= -1.0;\n    }\n\n    // Finally, update the headlights:\n    const finalModel = this.getCarBodyModel();\n    this.headlight.position = vec3.transformMat4(vec3.create(), this.headlightLocalPosition, finalModel);\n    // Tilt downwards slightly.\n    this.headlight.direction = vec3.transformMat4(vec3.create(), this.getForwardVector(), this.headlightDownRotation);\n  }\n\n  getProjectiles(): Projectile[] {\n    const projs = [];\n    this.projectiles.forEach(proj => {\n      projs.push(proj);\n    });\n    this.projectiles = [];\n    return projs;\n  }\n\n  onHit(projectile: Projectile): void {\n    if (this.hasShield) {\n      this.shieldHealth -= projectile.damage;\n      if (this.shieldHealth < 0) {\n        this.hasShield = false;\n      }\n      return;\n    }\n    this.health -= projectile.damage;\n    this.bodyMaterial.diffuse[0] -= 0.1;\n  }\n\n  onPowerUp(powerUp: PowerUp): void {\n    switch (powerUp.powerUpType) {\n      case PowerUpType.SHIELD:\n        this.activateShield();\n        break;\n    }\n  }\n\n  getAxisAlignedBox(): Box {\n    const min = makeVec(0, 0, 0);\n    const max = makeVec(0, 0, 0);\n    const model = this.getCarBodyModel();\n    const bottomOffset = makeVec(0, -2, 0);\n    const leftFrontBottom = vec3.transformMat4(vec3.create(), makeVec(-this.bodyWidth, 0, -CAR_BODY_RENDERABLE.zOffset), model);\n    const leftBackBottom = vec3.transformMat4(vec3.create(), makeVec(-this.bodyWidth, 0, CAR_BODY_RENDERABLE.zOffset), model);\n    const rightBackBottom = vec3.transformMat4(vec3.create(), makeVec(this.bodyWidth, 0, CAR_BODY_RENDERABLE.zOffset), model);\n    const rightFrontBottom = vec3.transformMat4(vec3.create(), makeVec(this.bodyWidth, 0, -CAR_BODY_RENDERABLE.zOffset), model);\n    const yMax = CAR_BODY_RENDERABLE.yMax;\n    const leftFrontTop = vec3.transformMat4(vec3.create(), makeVec(-this.bodyWidth, yMax, -CAR_BODY_RENDERABLE.zOffset), model);\n    const leftBackTop = vec3.transformMat4(vec3.create(), makeVec(-this.bodyWidth, yMax, CAR_BODY_RENDERABLE.zOffset), model);\n    const rightBackTop = vec3.transformMat4(vec3.create(), makeVec(this.bodyWidth, yMax, CAR_BODY_RENDERABLE.zOffset), model);\n    const rightFrontTop = vec3.transformMat4(vec3.create(), makeVec(this.bodyWidth, yMax, -CAR_BODY_RENDERABLE.zOffset), model);\n    min[0] = Math.min(leftFrontBottom[0], leftBackBottom[0], rightBackBottom[0], rightFrontBottom[0], leftFrontTop[0], leftBackTop[0], rightBackTop[0], rightFrontTop[0]);\n    min[1] = Math.min(leftFrontBottom[1], leftBackBottom[1], rightBackBottom[1], rightFrontBottom[1], leftFrontTop[1], leftBackTop[1], rightBackTop[1], rightFrontTop[1]);\n    min[2] = Math.min(leftFrontBottom[2], leftBackBottom[2], rightBackBottom[2], rightFrontBottom[2], leftFrontTop[2], leftBackTop[2], rightBackTop[2], rightFrontTop[2]);\n\n    max[0] = Math.max(leftFrontBottom[0], leftBackBottom[0], rightBackBottom[0], rightFrontBottom[0], leftFrontTop[0], leftBackTop[0], rightBackTop[0], rightFrontTop[0]);\n    max[1] = Math.max(leftFrontBottom[1], leftBackBottom[1], rightBackBottom[1], rightFrontBottom[1], leftFrontTop[1], leftBackTop[1], rightBackTop[1], rightFrontTop[1]);\n    max[2] = Math.max(leftFrontBottom[2], leftBackBottom[2], rightBackBottom[2], rightFrontBottom[2], leftFrontTop[2], leftBackTop[2], rightBackTop[2], rightFrontTop[2]);\n\n    return new Box(min, max);\n  }\n\n  getCarBodyModel(): mat4 {\n    const carBodyModelMatrix = mat4.create();\n    mat4.translate(carBodyModelMatrix,\n      carBodyModelMatrix,\n      this.position);\n\n    mat4.multiply(carBodyModelMatrix, carBodyModelMatrix, this.getRotationMatrix());\n    return carBodyModelMatrix;\n  }\n\n  getRotationMatrix(): mat4 {\n    const rotationMatrix = mat4.create();\n    mat4.rotate(rotationMatrix,\n      rotationMatrix,\n      this.yRotationAngle,\n      Y_AXIS);\n\n    mat4.rotate(rotationMatrix,\n      rotationMatrix,\n      this.xRotationAngle,\n      X_AXIS);\n\n    mat4.rotate(rotationMatrix,\n      rotationMatrix,\n      this.zRotationAngle,\n      Z_AXIS);\n    return rotationMatrix;\n  }\n\n  getCarBodyModelWithJustYRotation(): mat4 {\n    const carBodyModelMatrix = mat4.create();\n    mat4.translate(carBodyModelMatrix,\n      carBodyModelMatrix,\n      this.position);\n\n    mat4.rotate(carBodyModelMatrix,\n      carBodyModelMatrix,\n      this.yRotationAngle,\n      Y_AXIS);\n    return carBodyModelMatrix;\n  }\n\n  getLights(): Light[] {\n    return [this.headlight];\n  }\n\n  render(gl: WebGLRenderingContext, program: StandardShaderProgram): void {\n    const carBodyModelMatrix = this.getCarBodyModel();\n    program.setMaterialUniform(gl, this.bodyMaterial);\n    CAR_BODY_RENDERABLE.render(gl, program, carBodyModelMatrix);\n\n    program.setMaterialUniform(gl, this.wheelMaterial);\n    this.renderWheel(true, carBodyModelMatrix, this.frontLeftWheelPosition, gl, program);\n    this.renderWheel(false, carBodyModelMatrix, this.backLeftWheelPosition, gl, program);\n    this.renderWheel(false, carBodyModelMatrix, this.backRightWheelPosition, gl, program);\n    this.renderWheel(true, carBodyModelMatrix, this.frontRightWheelPosition, gl, program);\n\n    this.renderGun(gl, program);\n  }\n\n  renderLight(gl: WebGLRenderingContext, program: LightShaderProgram) {\n    program.setColor(gl, makeVec4(1.0, 1.0, 1.0, 1.0));\n    const translation = mat4.create();\n    mat4.translate(translation, translation, this.headlight.position);\n    const scale = .3;\n    const model = mat4.create();\n    mat4.scale(model, model, [scale, scale, scale]);\n    mat4.multiply(model, this.getRotationMatrix(), model);\n    mat4.multiply(model, translation, model);\n    CUBE_RENDERABLE.render(gl, program, model);\n  }\n\n  private renderGun(gl: WebGLRenderingContext, program: StandardShaderProgram) {\n\n  }\n\n  activateShield() {\n    this.hasShield = true;\n    this.shieldHealth = this.MAX_SHIELD_HEALTH;\n  }\n\n  renderTranslucents(gl: WebGLRenderingContext, program: StandardShaderProgram): void {\n    if (this.hasShield) {\n      this.renderShield(gl, program);\n    }\n    if (!this.isRenderAabb) {\n      return;\n    }\n\n    // Render the AABB\n    const box = this.getAxisAlignedBox();\n    const model = mat4.create();\n    const x = box.bounds[1][0] - box.bounds[0][0];\n    const y = box.bounds[1][1] - box.bounds[0][1];\n    const z = box.bounds[1][2] - box.bounds[0][2];\n    mat4.translate(model, model, makeVec(this.position[0], this.position[1] + y / 2, this.position[2]));\n    mat4.scale(model, model, [\n      x / 2, y / 2, z / 2\n    ]);\n    const boxMaterial: Material = {\n      ambient: makeVec4(.3, .3, .1, .1),\n      diffuse: makeVec4(.3, .3, .1, .1),\n      specular: makeVec4(.3, .3, .1, .3),\n      shininess: 2.0,\n    };\n    program.setMaterialUniform(gl, boxMaterial);\n    CUBE_RENDERABLE.render(gl, program, model);\n  }\n\n  getHasShield(): boolean {\n    return this.hasShield;\n  }\n\n  shieldRadius = 13;\n  private renderShield(\n    gl: WebGLRenderingContext, program: StandardShaderProgram) {\n    const model = this.getCarBodyModel();\n    const shieldPercentage = this.shieldHealth / this.MAX_SHIELD_HEALTH;\n    const shieldMaterial: Material = {\n      ambient: makeVec4(.0, .3, .7, .1 * shieldPercentage),\n      diffuse: makeVec4(.0, .3, .7, .1 * shieldPercentage),\n      specular: makeVec4(.0, .3, .7, .3 * shieldPercentage),\n      shininess: 2.0,\n    };\n    program.setMaterialUniform(gl, shieldMaterial);\n    const scale = mat4.scale(\n      mat4.create(),\n      mat4.create(),\n      [this.shieldRadius, this.shieldRadius, this.shieldRadius]);\n    mat4.multiply(model, model, scale);\n    HALF_SPHERE_RENDERABLE.render(gl, program, model);\n  }\n\n  private renderWheel(\n    isFront: boolean,\n    carBodyModelMatrix: mat4,\n    wheelPos: vec3,\n    gl: WebGLRenderingContext,\n    program: StandardShaderProgram) {\n    const wheelTransMat = mat4.create();\n    mat4.translate(wheelTransMat,\n      wheelTransMat,\n      wheelPos);\n    const wheelModelMatrix = mat4.create();\n    mat4.multiply(wheelModelMatrix, carBodyModelMatrix, wheelTransMat);\n    if (isFront) {\n      const wheelRotMat = mat4.create();\n      mat4.rotate(wheelRotMat, wheelRotMat, this.wheelTurn, [0, 1, 0]);\n      mat4.multiply(wheelModelMatrix, wheelModelMatrix, wheelRotMat);\n    }\n    WHEEL_RENDERABLE.render(gl, program, wheelModelMatrix);\n  }\n}","import { Renderable } from './renderable';\nimport { vec3, mat4 } from 'gl-matrix';\nimport { makeVec, addVec, Square, Triangle, getTrianglesFromSquares } from '../math_utils';\n\n/** Square centered at (0, 0, 0) on the xz plane, with it's normal in the +y direction. */\nclass SquareRenderable extends Renderable {\n\n    constructor() {\n        super();\n\n        const halfWidth = 1;\n        const topLeft = makeVec(-halfWidth, 0, -halfWidth);\n        const bottomLeft = makeVec(-halfWidth, 0, halfWidth);\n        const bottomRight = makeVec(halfWidth, 0, halfWidth);\n        const topRight = makeVec(halfWidth, 0, -halfWidth);\n        const squares = [new Square({ a: topLeft, b: bottomLeft, c: bottomRight, d: topRight })];\n        const triangles = getTrianglesFromSquares(squares);\n        this.addTriangles(triangles);\n    }\n}\n\nexport const SQUARE_RENDERABLE = new SquareRenderable();","import { vec3, mat4 } from 'gl-matrix';\nimport { StandardShaderProgram } from 'src/app/shaders/standard_shader_program';\nimport { FLOOR_RENDERABLE } from 'src/app/renderables/floor_renderable';\nimport { GameObject } from './game_object';\nimport { SQUARE_RENDERABLE } from 'src/app/renderables/square_renderable';\nimport { makeVec, makeVec4, Square } from 'src/app/math_utils';\nimport { Material } from 'src/app/material';\n\ninterface Tile {\n    model: mat4;\n    material: Material;\n    square: Square;\n}\n\nexport class Floor extends GameObject {\n\n    private readonly floorColor = [.05, .2, .05, 1.0];\n\n    private readonly useGrid = true;\n    private readonly gridTiles: Tile[] = [];\n\n    private readonly width = 1000;\n\n    constructor() {\n        super();\n        const scaling = this.width / 2;\n        this.scale = new Float32Array([scaling, scaling, scaling]);\n\n        if (this.useGrid) {\n            const gridColors = [\n                {\n                    ambient: makeVec4(1, 1, 1, 1),\n                    diffuse: makeVec4(1, 1, 1, 1),\n                    specular: makeVec4(1, 1, 1, 1),\n                    shininess: 32,\n                },\n                {\n                    ambient: makeVec4(0.2, 0.2, 0.2, 1),\n                    diffuse: makeVec4(0.2, 0.2, 0.2, 1),\n                    specular: makeVec4(1, 1, 1, 1),\n                    shininess: 32,\n                },\n            ];\n\n            const squareSize = 50;\n            const scale = squareSize / 2;\n            const start = -(this.width / 2);\n            const squaresPerRow = this.width / squareSize;\n            const initialPosition = [start, 0, start];\n            const elevationStartZ = squaresPerRow / 2 + 2;\n            const deltaY = 8;\n            const halfDeltaY = deltaY / 2;\n            for (let i = 0; i < squaresPerRow; i++) {\n                for (let j = 0; j < squaresPerRow; j++) {\n                    let yFront = 0;\n                    let yBack = 0;\n                    if (j < 4) {\n                        yFront = deltaY * (j);\n                        yBack = deltaY * (j + 1);\n                    } else if (j === 4) {\n                        yFront = yBack = deltaY * 4;\n                    } else if (j <= 8) {\n                        yFront = deltaY * (8 - j + 1)\n                        yBack = deltaY * (8 - j);\n                    }\n                    // const position = [initialPosition[0] + squareSize * i, y, initialPosition[2] + squareSize * j];\n\n                    const leftX = initialPosition[0] + squareSize * i;\n                    const rightX = leftX + squareSize;\n                    const frontZ = initialPosition[2] + squareSize * j;\n                    const backZ = frontZ + squareSize;\n                    const square = new Square({\n                        a: makeVec(leftX, yFront, frontZ),\n                        b: makeVec(leftX, yBack, backZ),\n                        c: makeVec(rightX, yBack, backZ),\n                        d: makeVec(rightX, yFront, frontZ),\n                    });\n                    const bToA = vec3.sub(vec3.create(), square.a, square.b);\n                    let rotAngleAboutXAxis = vec3.angle(bToA, makeVec(0, 0, -1.0));\n                    if (yFront < yBack) {\n                        rotAngleAboutXAxis *= -1.0;\n                    }\n                    const squareCenter = makeVec(leftX + scale, (yFront + yBack) / 2.0, frontZ + scale);\n                    const model = mat4.create();\n                    mat4.translate(model, model, squareCenter);\n                    mat4.rotate(model,\n                        model,\n                        rotAngleAboutXAxis,\n                        makeVec(1, 0, 0));\n                    const zScale = vec3.length(bToA) / 2.0;\n                    mat4.scale(model, model, [scale, scale, zScale]);\n                    const colorIndex = (i + j) % 2;\n                    const tile = {\n                        model,\n                        material: gridColors[colorIndex],\n                        square,\n                    };\n                    this.gridTiles.push(tile);\n                }\n            }\n        }\n    }\n\n    getYAtXZ(x: number, z: number): number {\n        for (let tile of this.gridTiles) {\n            if (x >= tile.square.a[0] && x <= tile.square.d[0] && z >= tile.square.a[2] && z <= tile.square.b[2]) {\n                const tileZLength = Math.abs(tile.square.a[2] - tile.square.b[2]);\n                const zRatio = (z - tile.square.a[2]) / tileZLength;\n\n                const aToB = vec3.sub(vec3.create(), tile.square.b, tile.square.a);\n                const interpolated = vec3.scale(vec3.create(), aToB, zRatio);\n                return interpolated[1] + tile.square.a[1];\n            }\n        }\n        console.log(\"XZ not found\");\n        return -1;\n    }\n\n    render(gl: WebGLRenderingContext, program: StandardShaderProgram): void {\n        if (this.useGrid) {\n            this.gridTiles.forEach((tile: Tile) => {\n                program.setMaterialUniform(gl, tile.material);\n                SQUARE_RENDERABLE.render(gl, program, tile.model);\n            })\n            return;\n        }\n\n        const model = mat4.create();\n        mat4.translate(model, model, this.position);\n        mat4.scale(model, model, this.scale);\n        SQUARE_RENDERABLE.render(gl, program, model);\n    }\n}","import { Renderable } from './renderable';\nimport { vec3, mat4 } from 'gl-matrix';\nimport { makeVec, addVec, Square, Triangle } from '../math_utils';\n\nclass FloorRenderable extends Renderable {\n\n  USE_GRID = false;\n  constructor() {\n    super();\n\n    if (this.USE_GRID) {\n\n    } else {\n      const width = 1000;\n      const squareSize = 10;\n      const start = -(width / 2);\n      const squares: Square[] = [];\n\n      const Y = 0;\n      const squaresPerRow = width / squareSize;\n      for (let i = 0; i < squaresPerRow - 1; i++) {\n        for (let j = 0; j < squaresPerRow - 1; j++) {\n          const a = makeVec(i * squareSize + start, Y, j * squareSize + start);\n          const b = makeVec(i * squareSize + start, Y, (j + 1) * squareSize + start);\n          const c = makeVec((i + 1) * squareSize + start, Y, (j + 1) * squareSize + start);\n          const d = makeVec((i + 1) * squareSize + start, Y, j * squareSize + start);\n          squares.push(new Square({ a, b, c, d }));\n        }\n      }\n\n      const triangles: Triangle[] = [];\n      this.positions = [];\n      this.normals = [];\n      for (let square of squares) {\n        const triA = new Triangle(square.a, square.b, square.d);\n        const triB = new Triangle(square.b, square.c, square.d);\n        triangles.push(triA);\n        triangles.push(triB);\n      }\n      for (let triangle of triangles) {\n        const triNormal = triangle.getNormal();\n        vec3.normalize(triNormal, triNormal);\n        addVec(this.positions, triangle.a);\n        addVec(this.positions, triangle.b);\n        addVec(this.positions, triangle.c);\n        addVec(this.normals, triNormal);\n        addVec(this.normals, triNormal);\n        addVec(this.normals, triNormal);\n      }\n    }\n  }\n}\n\nexport const FLOOR_RENDERABLE = new FloorRenderable();","/**\n * @fileOverview\n * WebGL boilerplate for creating/loading shaders, textures, and programs.\n */\n\n/** Initialize a shader program, so WebGL knows how to draw our data. */\nexport function initShaderProgram(gl: WebGLRenderingContext, vsSource: string, fsSource: string): WebGLProgram {\n    const vertexShader = loadShader(gl, gl.VERTEX_SHADER, vsSource);\n    const fragmentShader = loadShader(gl, gl.FRAGMENT_SHADER, fsSource);\n\n    // Create the shader program\n    const shaderProgram = gl.createProgram();\n    gl.attachShader(shaderProgram, vertexShader);\n    gl.attachShader(shaderProgram, fragmentShader);\n    gl.linkProgram(shaderProgram);\n\n    // If creating the shader program failed, alert\n    if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\n        alert('Unable to initialize the shader program: ' + gl.getProgramInfoLog(shaderProgram));\n        return null;\n    }\n    return shaderProgram;\n}\n\n/** Creates a shader of the given type, uploads the source and compiles it. */\nexport function loadShader(gl: WebGLRenderingContext, type: number, source: string) {\n    const shader: WebGLShader = gl.createShader(type);\n    // Send the source to the shader object\n    gl.shaderSource(shader, source);\n    // Compile the shader program\n    gl.compileShader(shader);\n\n    // See if it compiled successfully\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        alert('An error occurred compiling the shaders: ' + gl.getShaderInfoLog(shader));\n        gl.deleteShader(shader);\n        return null;\n    }\n\n    return shader;\n}\n\n/**\n * Initialize a texture and load an image.\n * When the image finished loading copy it into the texture.\n */\nexport function loadTexture(gl: WebGLRenderingContext, url: string): WebGLTexture {\n    const texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n\n    // Because images have to be download over the internet\n    // they might take a moment until they are ready.\n    // Until then put a single pixel in the texture so we can\n    // use it immediately. When the image has finished downloading\n    // we'll update the texture with the contents of the image.\n    const level = 0;\n    const internalFormat = gl.RGBA;\n    const width = 1;\n    const height = 1;\n    const border = 0;\n    const srcFormat = gl.RGBA;\n    const srcType = gl.UNSIGNED_BYTE;\n    const pixel = new Uint8Array([0, 0, 255, 255]);  // opaque blue\n    gl.texImage2D(gl.TEXTURE_2D, level, internalFormat,\n                    width, height, border, srcFormat, srcType,\n                    pixel);\n\n    const image = new Image();\n    image.crossOrigin = \"anonymous\";\n    image.onload = () => {\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        gl.texImage2D(gl.TEXTURE_2D, level, internalFormat,\n                    srcFormat, srcType, image);\n\n        // WebGL1 has different requirements for power of 2 images\n        // vs non power of 2 images so check if the image is a\n        // power of 2 in both dimensions.\n        if (isPowerOf2(image.width) && isPowerOf2(image.height)) {\n        // Yes, it's a power of 2. Generate mips.\n        gl.generateMipmap(gl.TEXTURE_2D);\n        } else {\n        // No, it's not a power of 2. Turn off mips and set\n        // wrapping to clamp to edge\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\n        // gl.NEAREST is also allowed, instead of gl.LINEAR, as neither mipmap.\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n        // Prevents s-coordinate wrapping (repeating).\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        // Prevents t-coordinate wrapping (repeating).\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        }\n    };\n\n    image.src = url;\n\n    return texture;\n}\n\nfunction isPowerOf2(value: number): boolean {\n    return (value & (value - 1)) == 0;\n}","import { loadTexture, initShaderProgram, loadShader } from 'src/app/gl_utils';\n\nexport interface BaseShaderAttribLocations {\n    readonly vertexPosition: number;\n    readonly vertexNormal: number;\n}\n\nexport interface BaseShaderUniformLocations {\n    readonly projectionMatrix: WebGLUniformLocation;\n    readonly viewMatrix: WebGLUniformLocation;\n    readonly modelMatrix: WebGLUniformLocation;\n    readonly normalMatrix: WebGLUniformLocation;\n}\n\nexport class BaseShaderProgram {\n    readonly program: WebGLProgram;\n    readonly attribLocations: BaseShaderAttribLocations;\n    readonly uniformLocations: BaseShaderUniformLocations;\n\n    constructor(gl: WebGLRenderingContext, vsSource: string, fsSource: string) {\n        const shaderProgram = initShaderProgram(gl, vsSource, fsSource);\n        this.program = shaderProgram;\n        this.attribLocations = {\n            vertexPosition: gl.getAttribLocation(shaderProgram, 'aVertexPosition'),\n            vertexNormal: gl.getAttribLocation(shaderProgram, 'aVertexNormal'),\n        };\n        this.uniformLocations = {\n            projectionMatrix: gl.getUniformLocation(shaderProgram, 'uProjectionMatrix'),\n            modelMatrix: gl.getUniformLocation(shaderProgram, 'uModelMatrix'),\n            viewMatrix: gl.getUniformLocation(shaderProgram, 'uViewMatrix'),\n            normalMatrix: gl.getUniformLocation(shaderProgram, 'uNormalMatrix'),\n        };\n    }\n}","import { BaseShaderProgram, BaseShaderUniformLocations } from './base_shader_program';\nimport { Material } from 'src/app/material';\nimport { LightColor, PointLight, SpotLight, DirectionalLight } from 'src/app/lights/lights';\n\nconst VERTEX_SHADER_SOURCE = `\n  precision mediump float;\n\n  struct LightColor {\n    vec4 ambient;\n    vec4 diffuse;\n    vec4 specular;\n  };\n\n  struct DirectionalLight {\n    vec3 direction;\n    LightColor lightColor;\n  };\n\n  struct PointLight {\n    vec3 position;\n    LightColor lightColor;\n\n    // For distance-based attenuation:\n    float constant;\n    float linear;\n    float quadratic;\n  };\n\n  struct SpotLight {\n    vec3 position;\n    vec3 direction;\n    LightColor lightColor;\n\n    // For cone size:\n    float lowerLimit;\n    float upperLimit;\n\n    // For distance-based attenuation:\n    float constant;\n    float linear;\n    float quadratic;\n  };\n\n  attribute vec4 aVertexPosition;\n  attribute vec3 aVertexNormal;\n\n  uniform mat4 uNormalMatrix;\n  uniform mat4 uModelMatrix;\n  uniform mat4 uViewMatrix;\n  uniform mat4 uProjectionMatrix;\n  \n  uniform DirectionalLight uDirectionalLight;\n  uniform vec3 uCameraPosition;\n\n  varying vec3 vPosition;\n  varying vec3 vNormal;\n\n  void main() {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * aVertexPosition;\n\n    vNormal = (uNormalMatrix * vec4(aVertexNormal, 1.0)).xyz;\n    vPosition = (uModelMatrix * aVertexPosition).xyz;;\n  }\n`;\n\nexport const MAX_POINT_LIGHTS = 12;\nexport const MAX_SPOT_LIGHTS = 12;\n\nconst FRAGMENT_SHADER_SOURCE = `\n  precision mediump float;\n\n  struct Material {\n    vec4 ambient;\n    vec4 diffuse;\n    vec4 specular;\n    float shininess;\n  };\n\n  struct LightColor {\n    vec4 ambient;\n    vec4 diffuse;\n    vec4 specular;\n  };\n\n  struct DirectionalLight {\n    vec3 direction;\n    LightColor lightColor;\n  };\n\n  struct PointLight {\n    vec3 position;\n    LightColor lightColor;\n\n    // For distance-based attenuation:\n    float constant;\n    float linear;\n    float quadratic;\n  };\n\n  struct SpotLight {\n    vec3 position;\n    vec3 direction;\n    LightColor lightColor;\n\n    // For cone size:\n    float lowerLimit;\n    float upperLimit;\n\n    // For distance-based attenuation:\n    float constant;\n    float linear;\n    float quadratic;\n  };\n\n  varying vec3 vPosition;\n  varying vec3 vNormal;\n\n  uniform vec3 uCameraPosition;\n  uniform float uFogNear;\n  uniform float uFogFar;\n  uniform vec4 uFogColor;\n\n  uniform DirectionalLight uDirectionalLight;\n\n  #define MAX_POINT_LIGHTS ${MAX_POINT_LIGHTS}  \n  uniform int uNumPointLights;\n  uniform PointLight uPointLights[MAX_POINT_LIGHTS];\n\n  #define MAX_SPOT_LIGHTS ${MAX_SPOT_LIGHTS}  \n  uniform int uNumSpotLights;\n  uniform SpotLight uSpotLights[MAX_SPOT_LIGHTS];\n\n  uniform Material uMaterial;\n\n  vec4 calculate_directional_light(\n      DirectionalLight directionalLight, \n      Material material, \n      vec3 normal, \n      vec3 surfaceToCamera) {\n    vec3 surfaceToLight = normalize(-directionalLight.direction);\n    vec4 directionalAmbient = directionalLight.lightColor.ambient * material.ambient;\n\n    float directionalDiffuseAmount = max(dot(normal, surfaceToLight), 0.0);\n    vec4 directionalDiffuse = directionalDiffuseAmount * directionalLight.lightColor.diffuse * material.diffuse;\n    \n    vec3 directionalSpecularReflectDir = reflect(-surfaceToLight, normal);\n    float directionalSpecularAmount = pow(max(dot(surfaceToCamera, directionalSpecularReflectDir), 0.0), material.shininess);\n    vec4 directionalSpecular = directionalSpecularAmount * directionalLight.lightColor.specular * material.specular;\n\n    return directionalAmbient + directionalDiffuse + directionalSpecular;\n  }\n\n  vec4 calculate_point_light(\n      vec3 worldPosition, \n      vec3 normal, \n      vec3 surfaceToCamera, \n      Material material, \n      PointLight pointLight) {\n    vec3 surfaceToPointLight = pointLight.position - worldPosition;\n    float distance    = length(surfaceToPointLight);\n    surfaceToPointLight = normalize(surfaceToPointLight);\n    float diffuse = max(dot(normal, surfaceToPointLight), 0.0);\n    vec3 reflectDir = reflect(-surfaceToPointLight, normal);  \n    float specular = pow(max(dot(surfaceToCamera, reflectDir), 0.0), material.shininess);\n    \n    float attenuation = 1.0 / (pointLight.constant + pointLight.linear * distance + \n        pointLight.quadratic * (distance * distance));\n    return pointLight.lightColor.ambient * material.ambient * attenuation + \n        diffuse * pointLight.lightColor.diffuse * material.diffuse * attenuation + \n        specular * pointLight.lightColor.specular * material.specular * attenuation;\n  }\n\n  vec4 calculate_spot_light(\n      vec3 worldPosition, \n      vec3 normal, \n      vec3 surfaceToCamera, \n      Material material, \n      SpotLight spotLight) {\n    vec4 ambient = spotLight.lightColor.ambient * material.diffuse;\n    \n    vec3 surfaceToSpotLight = spotLight.position - worldPosition;\n    float distance    = length(surfaceToSpotLight);\n    surfaceToSpotLight = normalize(surfaceToSpotLight);\n    float diff = max(dot(normal, surfaceToSpotLight), 0.0);\n    vec4 diffuse = spotLight.lightColor.diffuse * diff * material.diffuse;\n    \n    vec3 reflectDir = reflect(-surfaceToSpotLight, normal);  \n    float spec = pow(max(dot(surfaceToCamera, reflectDir), 0.0), material.shininess);\n    vec4 specular = spotLight.lightColor.specular * spec * material.specular;\n    \n    float spotLightIntensity = smoothstep(spotLight.upperLimit, spotLight.lowerLimit, dot(surfaceToSpotLight, normalize(-spotLight.direction)));\n    ambient *= spotLightIntensity;\n    diffuse  *= spotLightIntensity;\n    specular *= spotLightIntensity;\n    \n    // attenuation\n    float attenuation = 1.0 / (spotLight.constant + spotLight.linear * distance + spotLight.quadratic * (distance * distance));\n    return ambient * attenuation + diffuse * attenuation + specular * attenuation;\n  }\n\n  void main() {\n    vec3 normal = normalize(vNormal);\n    vec3 surfaceToCamera = normalize(uCameraPosition - vPosition);\n\n    // Lights\n    vec4 color = vec4(0, 0, 0, 0);\n\n    color += calculate_directional_light(uDirectionalLight, uMaterial, normal, surfaceToCamera);\n\n    for(int i= 0; i < MAX_POINT_LIGHTS; i++) {\n      if (i>=uNumPointLights) { break; }\n      color += calculate_point_light(vPosition, normal, surfaceToCamera, uMaterial, uPointLights[i]);\n    }\n    \n    for(int j= 0; j < MAX_SPOT_LIGHTS; j++) {\n      if (j>=uNumSpotLights) { break; }\n      color += calculate_spot_light(vPosition, normal, surfaceToCamera, uMaterial, uSpotLights[j]);\n    }\n\n    // Fog\n    float distance = length(vPosition - uCameraPosition);\n    float fogAmount = smoothstep(uFogNear, uFogFar, distance);\n    color = mix(color, vec4(uFogColor.xyz, color.w), fogAmount);\n    gl_FragColor = color;\n  }\n`;\n\ninterface PointLightLocations {\n  readonly position: WebGLUniformLocation;\n  readonly lightColorAmbient: WebGLUniformLocation;\n  readonly lightColorDiffuse: WebGLUniformLocation;\n  readonly lightColorSpecular: WebGLUniformLocation;\n  readonly constant: WebGLUniformLocation;\n  readonly linear: WebGLUniformLocation;\n  readonly quadratic: WebGLUniformLocation;\n}\n\ninterface SpotLightLocations {\n  readonly position: WebGLUniformLocation;\n  readonly direction: WebGLUniformLocation;\n  readonly lowerLimit: WebGLUniformLocation;\n  readonly upperLimit: WebGLUniformLocation;\n  readonly lightColorAmbient: WebGLUniformLocation;\n  readonly lightColorDiffuse: WebGLUniformLocation;\n  readonly lightColorSpecular: WebGLUniformLocation;\n  readonly constant: WebGLUniformLocation;\n  readonly linear: WebGLUniformLocation;\n  readonly quadratic: WebGLUniformLocation;\n}\n\nexport interface StandardShaderUniformLocations {\n  // Directional light\n  readonly directionalLightDirection: WebGLUniformLocation;\n  readonly directionalLightColorAmbient: WebGLUniformLocation;\n  readonly directionalLightColorDiffuse: WebGLUniformLocation;\n  readonly directionalLightColorSpecular: WebGLUniformLocation;\n\n  readonly numPointLights: WebGLUniformLocation;\n  readonly numSpotLights: WebGLUniformLocation;\n\n  // Camera\n  readonly cameraPosition: WebGLUniformLocation;\n\n  // Object material\n  readonly materialAmbient: WebGLUniformLocation;\n  readonly materialDiffuse: WebGLUniformLocation;\n  readonly materialSpecular: WebGLUniformLocation;\n  readonly materialShininess: WebGLUniformLocation;\n\n  // Fog\n  readonly fogNear: WebGLUniformLocation;\n  readonly fogFar: WebGLUniformLocation;\n  readonly fogColor: WebGLUniformLocation;\n}\n\nexport class StandardShaderProgram extends BaseShaderProgram {\n  readonly standardShaderUniformLocations: StandardShaderUniformLocations;\n\n  // Point lights\n  readonly pointLightLocations: PointLightLocations[] = [];\n  readonly spotLightLocations: SpotLightLocations[] = [];\n\n  constructor(gl: WebGLRenderingContext) {\n    super(gl, VERTEX_SHADER_SOURCE, FRAGMENT_SHADER_SOURCE);\n\n    this.standardShaderUniformLocations = {\n      directionalLightDirection: gl.getUniformLocation(this.program, 'uDirectionalLight.direction'),\n      directionalLightColorAmbient: gl.getUniformLocation(this.program, 'uDirectionalLight.lightColor.ambient'),\n      directionalLightColorDiffuse: gl.getUniformLocation(this.program, 'uDirectionalLight.lightColor.diffuse'),\n      directionalLightColorSpecular: gl.getUniformLocation(this.program, 'uDirectionalLight.lightColor.specular'),\n\n      numPointLights: gl.getUniformLocation(this.program, 'uNumPointLights'),\n      numSpotLights: gl.getUniformLocation(this.program, 'uNumSpotLights'),\n\n      cameraPosition: gl.getUniformLocation(this.program, 'uCameraPosition'),\n\n      materialAmbient: gl.getUniformLocation(this.program, 'uMaterial.ambient'),\n      materialDiffuse: gl.getUniformLocation(this.program, 'uMaterial.diffuse'),\n      materialSpecular: gl.getUniformLocation(this.program, 'uMaterial.specular'),\n      materialShininess: gl.getUniformLocation(this.program, 'uMaterial.shininess'),\n\n      fogNear: gl.getUniformLocation(this.program, 'uFogNear'),\n      fogFar: gl.getUniformLocation(this.program, 'uFogFar'),\n      fogColor: gl.getUniformLocation(this.program, 'uFogColor'),\n    };\n\n    for (let i = 0; i < MAX_POINT_LIGHTS; i++) {\n      const pointLightLocs = {\n        position: gl.getUniformLocation(this.program, `uPointLights[${i}].position`),\n        lightColorAmbient: gl.getUniformLocation(this.program, `uPointLights[${i}].lightColor.ambient`),\n        lightColorDiffuse: gl.getUniformLocation(this.program, `uPointLights[${i}].lightColor.diffuse`),\n        lightColorSpecular: gl.getUniformLocation(this.program, `uPointLights[${i}].lightColor.specular`),\n        constant: gl.getUniformLocation(this.program, `uPointLights[${i}].constant`),\n        linear: gl.getUniformLocation(this.program, `uPointLights[${i}].linear`),\n        quadratic: gl.getUniformLocation(this.program, `uPointLights[${i}].quadratic`),\n      };\n      this.pointLightLocations.push(pointLightLocs);\n    }\n\n    for (let i = 0; i < MAX_SPOT_LIGHTS; i++) {\n      const spotLightLocs = {\n        position: gl.getUniformLocation(this.program, `uSpotLights[${i}].position`),\n        direction: gl.getUniformLocation(this.program, `uSpotLights[${i}].direction`),\n        lowerLimit: gl.getUniformLocation(this.program, `uSpotLights[${i}].lowerLimit`),\n        upperLimit: gl.getUniformLocation(this.program, `uSpotLights[${i}].upperLimit`),\n        lightColorAmbient: gl.getUniformLocation(this.program, `uSpotLights[${i}].lightColor.ambient`),\n        lightColorDiffuse: gl.getUniformLocation(this.program, `uSpotLights[${i}].lightColor.diffuse`),\n        lightColorSpecular: gl.getUniformLocation(this.program, `uSpotLights[${i}].lightColor.specular`),\n        constant: gl.getUniformLocation(this.program, `uSpotLights[${i}].constant`),\n        linear: gl.getUniformLocation(this.program, `uSpotLights[${i}].linear`),\n        quadratic: gl.getUniformLocation(this.program, `uSpotLights[${i}].quadratic`),\n      };\n      this.spotLightLocations.push(spotLightLocs);\n    }\n  }\n\n  setMaterialUniform(gl: WebGLRenderingContext, material: Material) {\n    gl.uniform4fv(this.standardShaderUniformLocations.materialAmbient, material.ambient);\n    gl.uniform4fv(this.standardShaderUniformLocations.materialDiffuse, material.diffuse);\n    gl.uniform4fv(this.standardShaderUniformLocations.materialSpecular, material.specular);\n    gl.uniform1f(this.standardShaderUniformLocations.materialShininess, material.shininess);\n  }\n\n  setDirectionalLight(gl: WebGLRenderingContext, directionalLight: DirectionalLight) {\n    gl.uniform3fv(this.standardShaderUniformLocations.directionalLightDirection, directionalLight.direction);\n    gl.uniform4fv(this.standardShaderUniformLocations.directionalLightColorAmbient, directionalLight.lightColor.ambient);\n    gl.uniform4fv(this.standardShaderUniformLocations.directionalLightColorDiffuse, directionalLight.lightColor.diffuse);\n    gl.uniform4fv(this.standardShaderUniformLocations.directionalLightColorSpecular, directionalLight.lightColor.specular);\n  }\n\n  setPointLights(gl: WebGLRenderingContext, pointLights: PointLight[]) {\n    const numPointLights = pointLights.length;\n    gl.uniform1i(this.standardShaderUniformLocations.numPointLights, numPointLights);\n    for (let index = 0; index < numPointLights; index++) {\n      const pointLight = pointLights[index];\n      gl.uniform3fv(this.pointLightLocations[index].position, pointLight.position);\n      gl.uniform4fv(this.pointLightLocations[index].lightColorAmbient, pointLight.lightColor.ambient);\n      gl.uniform4fv(this.pointLightLocations[index].lightColorDiffuse, pointLight.lightColor.diffuse);\n      gl.uniform4fv(this.pointLightLocations[index].lightColorSpecular, pointLight.lightColor.specular);\n      gl.uniform1f(this.pointLightLocations[index].constant, pointLight.constant);\n      gl.uniform1f(this.pointLightLocations[index].linear, pointLight.linear);\n      gl.uniform1f(this.pointLightLocations[index].quadratic, pointLight.quadratic);\n    }\n  }\n\n  setSpotLights(gl: WebGLRenderingContext, spotLights: SpotLight[]) {\n    const numSpotLights = spotLights.length;\n    gl.uniform1i(this.standardShaderUniformLocations.numSpotLights, numSpotLights);\n    for (let index = 0; index < numSpotLights; index++) {\n      const spotLight = spotLights[index];\n      gl.uniform3fv(this.spotLightLocations[index].position, spotLight.position);\n      gl.uniform3fv(this.spotLightLocations[index].direction, spotLight.direction);\n      gl.uniform1f(this.spotLightLocations[index].upperLimit, spotLight.upperLimit);\n      gl.uniform1f(this.spotLightLocations[index].lowerLimit, spotLight.lowerLimit);\n      gl.uniform4fv(this.spotLightLocations[index].lightColorAmbient, spotLight.lightColor.ambient);\n      gl.uniform4fv(this.spotLightLocations[index].lightColorDiffuse, spotLight.lightColor.diffuse);\n      gl.uniform4fv(this.spotLightLocations[index].lightColorSpecular, spotLight.lightColor.specular);\n      gl.uniform1f(this.spotLightLocations[index].constant, spotLight.constant);\n      gl.uniform1f(this.spotLightLocations[index].linear, spotLight.linear);\n      gl.uniform1f(this.spotLightLocations[index].quadratic, spotLight.quadratic);\n    }\n  }\n}","import { vec3, vec4, mat4 } from 'gl-matrix';\nimport { BaseShaderProgram, BaseShaderUniformLocations } from './base_shader_program';\n\nconst VERTEX_SHADER_SOURCE = `\n  precision mediump float;\n\n  attribute vec4 aVertexPosition;\n  attribute vec3 aVertexNormal;\n\n  uniform mat4 uNormalMatrix;\n  uniform mat4 uModelMatrix;\n  uniform mat4 uViewMatrix;\n  uniform mat4 uProjectionMatrix;\n\n  varying vec3 vNormal;\n\n  void main() {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * aVertexPosition;\n\n    vNormal = (uNormalMatrix * vec4(aVertexNormal, 1.0)).xyz;\n  }\n`;\n\nconst FRAGMENT_SHADER_SOURCE = `\n  precision mediump float;\n\n  varying vec3 vNormal;\n\n  uniform vec4 uColor;\n\n  void main() {\n    gl_FragColor = uColor;\n  }\n`;\n\nexport class LightShaderProgram extends BaseShaderProgram {\n\n  readonly colorUniformLocation: WebGLUniformLocation;\n\n  constructor(gl: WebGLRenderingContext) {\n    super(gl, VERTEX_SHADER_SOURCE, FRAGMENT_SHADER_SOURCE);\n    this.colorUniformLocation = gl.getUniformLocation(this.program, 'uColor');\n  }\n\n  setColor(gl: WebGLRenderingContext, lightColor: vec4) {\n    gl.uniform4fv(this.colorUniformLocation, lightColor);\n  }\n}","import { StandardShaderProgram } from \"src/app/shaders/standard_shader_program\";\nimport { LightShaderProgram } from 'src/app/shaders/light_shader_program';\n\n\nclass Shaders {\n    standard: StandardShaderProgram;\n    light: LightShaderProgram;\n\n    init(gl: WebGLRenderingContext) {\n        this.standard = new StandardShaderProgram(gl);\n        this.light = new LightShaderProgram(gl);\n    }\n}\n\nexport const SHADERS = new Shaders();","import { vec3, mat4 } from 'gl-matrix';\nimport { makeVec } from 'src/app/math_utils';\nimport { CONTROLS, Key } from 'src/app/controls';\n\n\nexport class Camera {\n    cameraPosition: vec3;\n    target: vec3;\n    readonly up = makeVec(0, 1, 0);\n\n    constructor() {\n        this.cameraPosition = makeVec(0, 12, 30);\n        this.target = makeVec(0, 0, 0);\n\n        CONTROLS.addAssignedControl(Key.J, \"camera orbit left\");\n        CONTROLS.addAssignedControl(Key.L, \"camera orbit right\");\n        CONTROLS.addAssignedControl(Key.I, \"camera move up\");\n        CONTROLS.addAssignedControl(Key.K, \"camera move down\");\n        CONTROLS.addAssignedControl(Key.O, \"camera zoom in\");\n        CONTROLS.addAssignedControl(Key.P, \"camera zoom out\");\n    }\n\n    getViewMatrix(): mat4 {\n        const view = mat4.create();\n        mat4.lookAt(view, this.cameraPosition, this.target, this.up);\n        return view;\n    }\n\n    update(elapsedMs: number) {\n        if (CONTROLS.isKeyDown(Key.J)) {\n            this.orbitLeft();\n        }\n        if (CONTROLS.isKeyDown(Key.L)) {\n            this.orbitRight();\n        }\n        if (CONTROLS.isKeyDown(Key.I)) {\n            this.moveUp();\n        }\n        if (CONTROLS.isKeyDown(Key.K)) {\n            this.moveDown();\n        }\n        if (CONTROLS.isKeyDown(Key.O)) {\n            this.zoomIn();\n        }\n        if (CONTROLS.isKeyDown(Key.P)) {\n            this.zoomOut();\n        }\n    }\n\n    ORBIT_ANGLE = Math.PI / 24;\n    orbitRight() {\n        vec3.rotateY(\n            this.cameraPosition,\n            this.cameraPosition,\n            this.target,\n            this.ORBIT_ANGLE);\n    }\n\n    orbitLeft() {\n        vec3.rotateY(\n            this.cameraPosition,\n            this.cameraPosition,\n            this.target,\n            -this.ORBIT_ANGLE);\n    }\n\n    MOVEMENT = 0.25;\n    moveUp() {\n        this.cameraPosition[1] += this.MOVEMENT;\n    }\n\n    moveDown() {\n        this.cameraPosition[1] -= this.MOVEMENT;\n    }\n\n    zoomIn() {\n        this.cameraPosition[2] -= this.MOVEMENT;\n    }\n\n    zoomOut() {\n        this.cameraPosition[2] += this.MOVEMENT;\n    }\n}","import { vec3, vec4, mat4 } from 'gl-matrix';\nimport { GameObject } from 'src/app/game_objects/game_object';\nimport { makeVec, makeVec4 } from 'src/app/math_utils';\nimport { StandardShaderProgram } from 'src/app/shaders/standard_shader_program';\nimport { LightShaderProgram } from 'src/app/shaders/light_shader_program';\nimport { CUBE_RENDERABLE } from 'src/app/renderables/cube_renderable';\nimport { Light, PointLight, LightType } from 'src/app/lights/lights';\nimport { Material } from 'src/app/material';\n\nexport class StreetLight extends GameObject {\n\n    private readonly color: vec4 = makeVec4(.3, .1, .3, 1.0);\n    private readonly material: Material = {\n        ambient: makeVec4(.3, .1, .3, 1.0),\n        diffuse: makeVec4(.3, .1, .3, 1.0),\n        specular: makeVec4(1, 1, 1, 1),\n        shininess: 69,\n    }\n\n    private readonly baseScale: vec3 = makeVec(1, 10, 1);\n    private readonly basePosition: vec3 = makeVec(5, 10, 0);\n\n    private readonly crossBarScale: vec3 = makeVec(4, 1, 1);\n    private readonly crossBarPosition: vec3 = makeVec(0, 19, 0);\n\n    private readonly light: PointLight = {\n        lightType: LightType.POINT,\n        position: makeVec(-3, 17, 0),\n        lightColor: {\n            ambient: makeVec4(.5, .5, .5, 1.0),\n            diffuse: makeVec4(.5, .5, .5, 1.0),\n            specular: makeVec4(.1, .1, .1, 1.0),\n        },\n        constant: 1,\n        linear: 0.009,\n        quadratic: 0.0032,\n    };\n\n    constructor() {\n        super();\n    }\n\n    update(elapsedTime: number): void {\n        // No-op\n        const model = this.getModel();\n        this.light.position = vec3.transformMat4(vec3.create(), makeVec(-3, 17, 0), model);\n    }\n\n    getModel(): mat4 {\n        const model = mat4.create();\n        mat4.translate(model, model, this.position);\n        return model;\n    }\n\n    render(gl: WebGLRenderingContext, program: StandardShaderProgram) {\n        program.setMaterialUniform(gl, this.material);\n\n        const model = this.getModel();\n\n        const baseModel = mat4.create();\n        mat4.translate(baseModel, model, this.basePosition);\n        mat4.scale(baseModel, baseModel, this.baseScale);\n        CUBE_RENDERABLE.render(gl, program, baseModel);\n\n        const crossBarModel = mat4.create();\n        mat4.translate(crossBarModel, model, this.crossBarPosition);\n        mat4.scale(crossBarModel, crossBarModel, this.crossBarScale);\n        CUBE_RENDERABLE.render(gl, program, crossBarModel);\n    }\n\n    getLights(): Light[] {\n        return [this.light];\n    }\n\n    renderLight(gl: WebGLRenderingContext, program: LightShaderProgram) {\n        program.setColor(gl, makeVec4(1.0, 1.0, 1.0, 1.0));\n        const model = mat4.create();\n        mat4.translate(model, model, this.light.position);\n        CUBE_RENDERABLE.render(gl, program, model);\n    }\n}","import { vec3, vec4, mat4 } from 'gl-matrix';\nimport { makeVec, makeVec4, addVec } from './math_utils';\n\nimport { CONTROLS, Key } from 'src/app/controls';\n\nimport { Camera } from './camera';\n\nimport { GameObject } from 'src/app/game_objects/game_object';\nimport { Car } from 'src/app/game_objects/car';\nimport { Floor } from 'src/app/game_objects/floor';\nimport { Projectile } from 'src/app/game_objects/projectile';\nimport { PowerUp, Shield } from 'src/app/game_objects/powerup';\nimport { StreetLight } from 'src/app/game_objects/street_light';\nimport { LightColor, DirectionalLight, PointLight, LightType, Light, SpotLight } from 'src/app/lights/lights';\n\nimport { SHADERS } from 'src/app/shaders/shaders';\nimport { StandardShaderProgram, MAX_POINT_LIGHTS, MAX_SPOT_LIGHTS } from 'src/app/shaders/standard_shader_program';\nimport { LightShaderProgram } from 'src/app/shaders/light_shader_program';\nimport { BaseShaderProgram } from 'src/app/shaders/base_shader_program';\nimport { COLLISION, Ray, Box } from 'src/app/collision';\n\ninterface FogParams {\n    fogColor: vec4;\n    fogNear: number;\n    fogFar: number;\n}\n\ninterface SceneParams {\n    clearColor: vec4;\n    floor: Floor;\n    fog: FogParams;\n    directionalLight: DirectionalLight;\n}\n\nexport class Scene {\n    gl: WebGLRenderingContext;\n    canvas: HTMLCanvasElement;\n\n    projectionMatrix: mat4;\n    camera: Camera;\n    isChaseCam: boolean = true;\n\n    sceneParams: SceneParams;\n\n    // GameObjects\n    gameObjects: GameObject[] = [];\n    playerCar: Car;\n    cars: Car[] = [];\n    streetLights: StreetLight[] = [];\n    projectiles: Projectile[] = [];\n\n    powerUps: PowerUp[] = [];\n    powerUpSpawns: vec3[]\n    maxPowerUps = 5;\n\n    constructor(canvas: HTMLCanvasElement, gl: WebGLRenderingContext, sceneParams: SceneParams) {\n        this.canvas = canvas;\n        this.gl = gl;\n        this.sceneParams = sceneParams;\n\n        this.projectionMatrix = this.createProjectionMatrix();\n\n        this.camera = new Camera();\n        CONTROLS.addAssignedControl(Key.M, 'Toggle chase cam');\n\n        this.gameObjects = [this.sceneParams.floor];\n\n        for (let i = 0; i < MAX_POINT_LIGHTS / 2; i++) {\n            const streetLight = new StreetLight();\n            streetLight.position = makeVec(50, 0, i * 50 - 50);\n            this.streetLights.push(streetLight);\n            this.gameObjects.push(streetLight);\n        }\n\n        this.powerUpSpawns = [];\n        this.maxPowerUps = MAX_POINT_LIGHTS / 2;\n        for (let j = 0; j < this.maxPowerUps; j++) {\n            const x = j * 125 - 250;\n            const z = -275; //j * 50 - 250;\n            const y = this.sceneParams.floor.getYAtXZ(x, z) + 4.0;\n            const pos = makeVec(x, y, z)\n            this.powerUpSpawns.push(pos);\n            const powerUp = this.getRandomPowerUp();\n            powerUp.position = pos;\n            this.powerUps.push(powerUp);\n            this.gameObjects.push(powerUp);\n        }\n    }\n\n    getRandomPowerUp(): PowerUp {\n        return new Shield();\n    }\n\n    setPlayerCar(car: Car) {\n        this.playerCar = car;\n        this.cars.push(this.playerCar);\n        this.gameObjects.push(this.playerCar);\n    }\n\n    addCar(car: Car) {\n        this.cars.push(car);\n        this.gameObjects.push(car);\n    }\n\n    update(elapsedMs: number) {\n        this.gameObjects.forEach((gameObject: GameObject) => {\n            gameObject.update(elapsedMs);\n        });\n        const carBoxes: Box[] = [];\n        this.cars.forEach((car: Car) => {\n            car.getProjectiles().forEach((proj: Projectile) => {\n                this.projectiles.push(proj);\n                this.gameObjects.push(proj);\n            });\n            carBoxes.push(car.getAxisAlignedBox());\n        });\n\n        // Check for projectile-car collisions.\n        for (let i = this.projectiles.length - 1; i >= 0; i--) {\n            const proj = this.projectiles[i];\n            if (proj.timeElapsedMs > 2000) {\n                this.projectiles.splice(i, 1);\n                this.gameObjects.splice(this.gameObjects.indexOf(proj), 1);\n                continue;\n            }\n            const ray = new Ray(proj.position, proj.initialVelocity);\n            carBoxes.forEach((box: Box, index: number) => {\n                let hit = false;\n                const car = this.cars[index];\n                if (car.getHasShield()) {\n                    hit = vec3.length(vec3.sub(vec3.create(), car.position, proj.position)) < car.shieldRadius;\n                } else if (COLLISION.pointInBox(proj.position, box)) {\n                    hit = true;\n                }\n                if (hit) {\n                    car.onHit(proj);\n                    this.projectiles.splice(i, 1);\n                    this.gameObjects.splice(this.gameObjects.indexOf(proj), 1);\n                }\n            });\n        }\n        // Check for dead cars.\n        for (let j = this.cars.length - 1; j >= 0; j--) {\n            const car = this.cars[j];\n            if (car.health <= 0) {\n                this.cars.splice(j, 1);\n                this.gameObjects.splice(this.gameObjects.indexOf(car), 1);\n            }\n        }\n\n        // Check for cars picking up power ups.\n        for (let j = this.cars.length - 1; j >= 0; j--) {\n            const car = this.cars[j];\n            for (let p = this.powerUps.length - 1; p >= 0; p--) {\n                const powerUp = this.powerUps[p];\n                if (vec3.length(vec3.sub(vec3.create(), powerUp.position, car.position)) < 10) {\n                    car.onPowerUp(powerUp);\n                    this.powerUps.splice(p, 1);\n                    this.gameObjects.splice(this.gameObjects.indexOf(powerUp), 1);\n                }\n            }\n        }\n        this.camera.update(elapsedMs);\n        this.updateChaseCam();\n    }\n\n    render() {\n        const gl = this.gl;\n        this.resize();\n        gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n        this.gl.clearColor(this.sceneParams.clearColor[0], this.sceneParams.clearColor[1], this.sceneParams.clearColor[2], this.sceneParams.clearColor[3]);\n        gl.enable(gl.BLEND);\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n        gl.clearDepth(1.0);                 // Clear everything\n        gl.enable(gl.CULL_FACE);            // Don't draw back facing triangles.\n        gl.enable(gl.DEPTH_TEST);           // Enable depth testing\n        gl.depthFunc(gl.LEQUAL);            // Near things obscure far things\n\n        // Clear the canvas before we start drawing on it.\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n        this.useProgram(SHADERS.standard);\n        this.setSceneParamsUniforms();\n\n        let pointLightCount = 0;\n        let spotLightCount = 0;\n        const lights = this.getAllLights();\n        SHADERS.standard.setPointLights(this.gl, lights.filter(light => light.lightType === LightType.POINT) as PointLight[]);\n        SHADERS.standard.setSpotLights(this.gl, lights.filter(light => light.lightType === LightType.SPOT) as SpotLight[]);\n\n        gl.uniform3fv(\n            SHADERS.standard.standardShaderUniformLocations.cameraPosition,\n            this.camera.cameraPosition);\n\n        this.gameObjects.forEach((gameObject: GameObject) => {\n            gameObject.render(this.gl, SHADERS.standard);\n        });\n        this.gameObjects.forEach((gameObject: GameObject) => {\n            gameObject.renderTranslucents(this.gl, SHADERS.standard);\n        });\n\n        this.useProgram(SHADERS.light);\n        this.gameObjects.forEach((gameObject: GameObject) => {\n            gameObject.renderLight(this.gl, SHADERS.light);\n        });\n    }\n\n    // Note - doesn't include the directional light (sun)\n    private getAllLights(): Light[] {\n        const lights = [];\n        this.gameObjects.forEach((gameObject: GameObject) => {\n            gameObject.getLights().forEach((light: Light) => {\n                lights.push(light);\n            });\n        });\n        return lights;\n    }\n\n    private updateChaseCam(): void {\n        if (this.isChaseCam) {\n            this.camera.target = vec3.clone(this.playerCar.position);\n            const carOffsetBack = vec3.scale(vec3.create(), this.playerCar.getBackwardVector(), 40);\n            const carOffsetUp = vec3.scale(vec3.create(), this.playerCar.getUpVector(), 13);\n            const carOffset = vec3.add(vec3.create(), carOffsetBack, carOffsetUp);\n            this.camera.cameraPosition = vec3.add(vec3.create(), this.camera.target, carOffset);\n        }\n        if (CONTROLS.isKeyDown(Key.M)) {\n            this.isChaseCam = !this.isChaseCam;\n        }\n    }\n\n    private createProjectionMatrix(): mat4 {\n        const projectionMatrix = mat4.create();\n\n        // Create a perspective matrix, a special matrix that is\n        // used to simulate the distortion of perspective in a camera.\n        // Our field of view is 45 degrees, with a width/height\n        // ratio that matches the display size of the canvas\n        // and we only want to see objects between 0.1 units\n        // and 100 units away from the camera.\n\n        const widthHeight = getWidthHeight(this.gl);\n        const fieldOfView = 45 * Math.PI / 180;   // in radians\n        const aspect = widthHeight.x / widthHeight.y;\n        const zNear = 0.1;\n        const zFar = 1000.0;\n\n        // note: glmatrix.js always has the first argument\n        // as the destination to receive the result.\n        mat4.perspective(projectionMatrix,\n            fieldOfView,\n            aspect,\n            zNear,\n            zFar);\n        return projectionMatrix;\n    }\n\n    private setSceneParamsUniforms() {\n        const gl = this.gl;\n        SHADERS.standard.setDirectionalLight(gl, this.sceneParams.directionalLight);\n        gl.uniform1f(SHADERS.standard.standardShaderUniformLocations.fogNear, this.sceneParams.fog.fogNear);\n        gl.uniform1f(SHADERS.standard.standardShaderUniformLocations.fogFar, this.sceneParams.fog.fogFar);\n        gl.uniform4fv(SHADERS.standard.standardShaderUniformLocations.fogColor, this.sceneParams.fog.fogColor);\n    }\n\n    private useProgram(program: BaseShaderProgram) {\n        this.gl.useProgram(program.program);\n        // Set the shader uniforms\n        this.gl.uniformMatrix4fv(\n            program.uniformLocations.projectionMatrix,\n            false,\n            this.projectionMatrix);\n\n        this.gl.uniformMatrix4fv(\n            program.uniformLocations.viewMatrix,\n            false,\n            this.camera.getViewMatrix());\n    }\n\n    // Thanks\n    // https://webglfundamentals.org/webgl/lessons/webgl-resizing-the-canvas.html\n    private resize() {\n        const realToCSSPixels = window.devicePixelRatio;\n\n        // Lookup the size the browser is displaying the canvas in CSS pixels\n        // and compute a size needed to make our drawingbuffer match it in\n        // device pixels.\n        const widthHeight = getWidthHeight(this.gl);\n        const displayWidth = Math.floor(widthHeight.x * realToCSSPixels);\n        const displayHeight = Math.floor(widthHeight.y * realToCSSPixels);\n\n        // Check if the canvas is not the same size.\n        if (this.canvas.width !== displayWidth ||\n            this.canvas.height !== displayHeight) {\n\n            // Make the canvas the same size\n            this.canvas.width = displayWidth;\n            this.canvas.height = displayHeight;\n        }\n\n        this.projectionMatrix = this.createProjectionMatrix();\n    }\n}\n\nfunction getWidthHeight(gl: WebGLRenderingContext): { x: number; y: number } {\n    const canvas = gl.canvas as HTMLCanvasElement;\n    return {\n        x: canvas.clientWidth,\n        y: canvas.clientHeight,\n    };\n}","import { vec3, vec4, mat4 } from 'gl-matrix';\nimport { makeVec, makeVec4, addVec } from './math_utils';\nimport { Car, Input } from 'src/app/game_objects/car';\nimport { Scene } from 'src/app/scene';\n\n\nexport class Ai {\n\n    private readonly car: Car;\n    private readonly scene: Scene;\n\n    constructor(car: Car, scene: Scene) {\n        this.car = car;\n        this.scene = scene;\n    }\n\n    private delay = 1000;\n    getInput(): Input {\n        if (this.delay > 0) {\n            this.delay--;\n            return {\n                isTurningLeft: false,\n                isTurningRight: false,\n                isGasPedalDown: false,\n                isBrakePedalDown: false,\n                isShooting: false,\n            };\n        }\n        const random = Math.random();\n        return {\n            isTurningLeft: random > .3,\n            isTurningRight: random > .3,\n            isGasPedalDown: random > .1,\n            isBrakePedalDown: false,\n            isShooting: random > .9,\n        };\n    }\n}","import { mat4, vec3, vec4 } from 'gl-matrix'\n\nimport { Camera } from 'src/app/camera';\n\nimport { GameObject } from 'src/app/game_objects/game_object';\nimport { Car } from 'src/app/game_objects/car';\nimport { Floor } from 'src/app/game_objects/floor';\nimport { StreetLight } from 'src/app/game_objects/street_light';\nimport { PointLight, LightType, Light, DirectionalLight } from 'src/app/lights/lights';\n\nimport { makeVec, makeVec4, addVec } from 'src/app/math_utils';\n\nimport { CAR_BODY_RENDERABLE } from 'src/app/renderables/car_body_renderable';\nimport { WHEEL_RENDERABLE } from 'src/app/renderables/wheel_renderable';\nimport { FLOOR_RENDERABLE } from 'src/app/renderables/floor_renderable';\nimport { CUBE_RENDERABLE } from 'src/app/renderables/cube_renderable';\n\nimport { StandardShaderProgram, MAX_POINT_LIGHTS, MAX_SPOT_LIGHTS } from 'src/app/shaders/standard_shader_program';\nimport { LightShaderProgram } from 'src/app/shaders/light_shader_program';\nimport { BaseShaderProgram } from 'src/app/shaders/base_shader_program';\nimport { SHADERS } from 'src/app/shaders/shaders';\nimport { SQUARE_RENDERABLE } from 'src/app/renderables/square_renderable';\nimport { CONTROLS, Key } from 'src/app/controls';\nimport { Scene } from 'src/app/scene';\nimport { HALF_SPHERE_RENDERABLE } from 'src/app/renderables/half_sphere_renderable';\nimport { Ai } from 'src/app/ai';\nimport * as styles from 'src/assets/css/styles.css';\n\nexport class Main {\n  private readonly title = 'JacobX';\n  private readonly canvas: HTMLCanvasElement;\n  private readonly gl: WebGLRenderingContext;\n  private lastTime: number = 0;\n  private scene: Scene;\n\n  constructor() {\n    document.body.style.backgroundColor = '#000000';\n\n    this.canvas = document.createElement('canvas');\n    this.canvas.style.backgroundColor = '#FF0000';\n    this.canvas.style.width = `100vw`;\n    this.canvas.style.height = `100vh`;\n    this.canvas.style.display = 'block';\n    document.body.appendChild(this.canvas);\n    document.body.classList.add(styles.body);\n\n    const controls = document.createElement('div');\n    controls.innerHTML = 'A/D - steer<br>W/S - accelerate/break<br>SPACE - shoot';\n    controls.style.position = 'absolute';\n    controls.style.color = '#fdaaaa';\n    const controlMargin = `12px`;\n    controls.style.top = controlMargin;\n    controls.style.left = controlMargin;\n    document.body.appendChild(controls);\n\n    this.gl = this.canvas.getContext('webgl', { alpha: true, premultipliedAlpha: false });\n\n    // Only continue if WebGL is available and working\n    if (this.gl === null) {\n      alert(\"Unable to initialize WebGL. Your browser or machine may not support it.\");\n      return;\n    }\n\n    SHADERS.init(this.gl);\n    this.initRenderables();\n    this.initScene();\n\n    this.gameLoop(0);\n  }\n\n  gameLoop(now: number) {\n    const elapsedMs = now - this.lastTime;\n    this.scene.update(elapsedMs);\n    this.scene.render();\n    this.lastTime = now;\n\n    window.requestAnimationFrame((elapsedTime: number) => {\n      this.gameLoop(elapsedTime);\n    });\n  }\n\n  initRenderables() {\n    CAR_BODY_RENDERABLE.initBuffers(this.gl);\n    WHEEL_RENDERABLE.initBuffers(this.gl);\n    FLOOR_RENDERABLE.initBuffers(this.gl);\n    CUBE_RENDERABLE.initBuffers(this.gl);\n    SQUARE_RENDERABLE.initBuffers(this.gl);\n    HALF_SPHERE_RENDERABLE.initBuffers(this.gl);\n  }\n\n  private initScene() {\n    const maxDirectionalLight = 0.3;\n    const clearColor = makeVec4(0.3, 0.4, 0.9, 1.0);\n    const floor = new Floor();\n    const directionalLight: DirectionalLight = {\n      lightType: LightType.DIRECTIONAL,\n      direction: makeVec(-2, -3, -1),\n      lightColor: {\n        ambient: makeVec4(.1, .1, .1, 1.0),\n        diffuse: makeVec4(maxDirectionalLight, maxDirectionalLight, maxDirectionalLight, 1.0),\n        specular: makeVec4(maxDirectionalLight, maxDirectionalLight, maxDirectionalLight, 1.0),\n      },\n    };\n    const sceneParams = {\n      clearColor,\n      fog: {\n        fogColor: clearColor,\n        fogNear: 25.0,\n        fogFar: 750.0,\n      },\n      directionalLight,\n      floor,\n    };\n    this.scene = new Scene(this.canvas, this.gl, sceneParams);\n\n    const playerCar = new Car(floor);\n    playerCar.bindControls();\n    // playerCar.activateShield();\n    this.scene.setPlayerCar(playerCar);\n\n    const carMats = [\n      {\n        ambient: makeVec4(.2, 0, .2, 1),\n        diffuse: makeVec4(.2, 0, .2, 1),\n        specular: makeVec4(.2, 0, .2, 1),\n        shininess: 1,\n      },\n      {\n        ambient: makeVec4(.14, .4, 0, 1),\n        diffuse: makeVec4(.14, .4, 0, 1),\n        specular: makeVec4(.14, .4, 0, 1),\n        shininess: 1,\n      }, {\n        ambient: makeVec4(0, .7, .2, 1),\n        diffuse: makeVec4(0, .7, .2, 1),\n        specular: makeVec4(0, .7, .2, 1),\n        shininess: 1,\n      }, {\n        ambient: makeVec4(0, .27, .62, 1),\n        diffuse: makeVec4(0, .27, .62, 1),\n        specular: makeVec4(0, .27, .62, 1),\n        shininess: 1,\n      }, {\n        ambient: makeVec4(0.1, .107, .42, 1),\n        diffuse: makeVec4(0.1, .107, .42, 1),\n        specular: makeVec4(0.1, .107, .42, 1),\n        shininess: 1,\n      }, {\n        ambient: makeVec4(0.3, .37, .32, 1),\n        diffuse: makeVec4(0.3, .37, .32, 1),\n        specular: makeVec4(0.3, .37, .32, 1),\n        shininess: 1,\n      }, {\n        ambient: makeVec4(0.4, .2, .2, 1),\n        diffuse: makeVec4(0.4, .2, .2, 1),\n        specular: makeVec4(0.4, .2, .2, 1),\n        shininess: 1,\n      }, {\n        ambient: makeVec4(.1, .9, .1, 1),\n        diffuse: makeVec4(.1, .9, .1, 1),\n        specular: makeVec4(.1, .9, .1, 1),\n        shininess: 1,\n      }, {\n        ambient: makeVec4(.8, .7, .5, 1),\n        diffuse: makeVec4(.8, .7, .5, 1),\n        specular: makeVec4(.8, .7, .5, 1),\n        shininess: 1,\n      }, {\n        ambient: makeVec4(.4, .4, .4, 1),\n        diffuse: makeVec4(.4, .4, .4, 1),\n        specular: makeVec4(.4, .4, .4, 1),\n        shininess: 1,\n      }, {\n        ambient: makeVec4(0.6, .78, .82, 1),\n        diffuse: makeVec4(0.6, .78, .82, 1),\n        specular: makeVec4(0.6, .78, .82, 1),\n        shininess: 1,\n      }, {\n        ambient: makeVec4(0.35, .53, .33, 1),\n        diffuse: makeVec4(0.35, .53, .33, 1),\n        specular: makeVec4(0.35, .53, .33, 1),\n        shininess: 1,\n      }, {\n        ambient: makeVec4(0.123, .456, .789, 1),\n        diffuse: makeVec4(0.123, .456, .789, 1),\n        specular: makeVec4(0.123, .456, .789, 1),\n        shininess: 1,\n      }, {\n        ambient: makeVec4(0.555, .222, .669, 1),\n        diffuse: makeVec4(0.555, .222, .669, 1),\n        specular: makeVec4(0.555, .222, .669, 1),\n        shininess: 1,\n      }, {\n        ambient: makeVec4(0.2, .765, .299, 1),\n        diffuse: makeVec4(0.2, .765, .299, 1),\n        specular: makeVec4(0.2, .765, .299, 1),\n        shininess: 1,\n      }\n    ];\n    for (let i = 0; i < MAX_SPOT_LIGHTS - 1; i++) {\n      const car = new Car(floor);\n      car.bodyMaterial = carMats[i];\n      car.position = makeVec(Math.random() * 50 - 50, 0.0, i * 50 - 50);\n      const randRot = Math.random() * -Math.PI / 4;\n      car.yRotationAngle = randRot;\n      car.ai = new Ai(car, this.scene);\n      this.scene.addCar(car);\n    }\n  }\n}\n\nlet isInitialized = false;\ndocument.onreadystatechange = () => {\n  if (document.readyState === 'complete' && !isInitialized) {\n    new Main();\n    isInitialized = true;\n  }\n}"],"sourceRoot":""}